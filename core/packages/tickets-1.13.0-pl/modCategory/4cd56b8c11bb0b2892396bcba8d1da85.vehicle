<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      '2bf0ceac22444023c9c55cbbfcc0349f' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.create","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"well create\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\r\\n    <div id=\\"ticket-preview-placeholder\\"><\\/div>\\r\\n\\r\\n    <input type=\\"hidden\\" name=\\"tid\\" value=\\"0\\"\\/>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\r\\n        <select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\r\\n        <input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\" value=\\"\\"\\r\\n               maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\"\\r\\n                  rows=\\"10\\"><\\/textarea>\\r\\n        <span class=\\"error\\" id=\\"content-error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"ticket-form-files\\">\\r\\n        [[+files]]\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-actions row\\">\\r\\n        <div class=\\"col-md-6\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\"\\/>\\r\\n        <\\/div>\\r\\n        <div class=\\"col-md-6 move-right\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\"\\/>\\r\\n            <input type=\\"submit\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_create.tpl","content":"<form class=\\"well create\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\r\\n    <div id=\\"ticket-preview-placeholder\\"><\\/div>\\r\\n\\r\\n    <input type=\\"hidden\\" name=\\"tid\\" value=\\"0\\"\\/>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\r\\n        <select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\r\\n        <input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\" value=\\"\\"\\r\\n               maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\"\\r\\n                  rows=\\"10\\"><\\/textarea>\\r\\n        <span class=\\"error\\" id=\\"content-error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"ticket-form-files\\">\\r\\n        [[+files]]\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-actions row\\">\\r\\n        <div class=\\"col-md-6\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\"\\/>\\r\\n        <\\/div>\\r\\n        <div class=\\"col-md-6 move-right\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\"\\/>\\r\\n            <input type=\\"submit\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n<\\/form>"}',
        'guid' => 'b369dfb6f67ff31ce9386e6a1d8ef35d',
        'native_key' => NULL,
        'signature' => '3065cd818f41441a7f588cac377ddd78',
      ),
      '2e5b4f52e88f09518c2c36bf233e8388' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.update","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form class=\\"well update\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\r\\n    <div id=\\"ticket-preview-placeholder\\"><\\/div>\\r\\n\\r\\n    <input type=\\"hidden\\" name=\\"tid\\" value=\\"[[+id]]\\"\\/>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\r\\n        <select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\r\\n        <input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\"\\r\\n               value=\\"[[+pagetitle]]\\" maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\" rows=\\"10\\">[[+content]]<\\/textarea>\\r\\n        <span class=\\"error\\" id=\\"content-error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"ticket-form-files\\">\\r\\n        [[+files]]\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-actions row\\">\\r\\n        <div class=\\"col-md-4\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\"\\/>\\r\\n        <\\/div>\\r\\n        <div class=\\"col-md-8 move-right\\">\\r\\n            [[+published:is=`1`:then=`\\r\\n            <a href=\\"[[~[[+id]]?scheme=`full`]]\\" class=\\"btn btn-default btn-xs\\" target=\\"_blank\\">[[%ticket_open]]<\\/a>\\r\\n            <input type=\\"button\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\" title=\\"\\"\\/>\\r\\n            `:else=`\\r\\n            <input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\"\\/>\\r\\n            `]]\\r\\n            <input type=\\"submit\\" class=\\"btn btn-default save\\" name=\\"save\\" value=\\"[[%ticket_save]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n            [[+allowDelete:is=`1`:then=`\\r\\n                [[+deleted:is=`1`:then=`\\r\\n                <input type=\\"button\\" class=\\"btn btn-default undelete\\" data-confirm=\\"[[%ticket_undelete_text]]\\" name=\\"undelete\\" value=\\"[[%ticket_undelete]]\\"\\/>\\r\\n                `:else=`\\r\\n                <input type=\\"button\\" class=\\"btn btn-default delete\\" data-confirm=\\"[[%ticket_delete_text]]\\" name=\\"delete\\" value=\\"[[%ticket_delete]]\\"\\/>\\r\\n                `]]\\r\\n            `]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_update.tpl","content":"<form class=\\"well update\\" method=\\"post\\" action=\\"\\" id=\\"ticketForm\\">\\r\\n    <div id=\\"ticket-preview-placeholder\\"><\\/div>\\r\\n\\r\\n    <input type=\\"hidden\\" name=\\"tid\\" value=\\"[[+id]]\\"\\/>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-sections\\">[[%tickets_section]]<\\/label>\\r\\n        <select name=\\"parent\\" class=\\"form-control\\" id=\\"ticket-sections\\">[[+sections]]<\\/select>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <label for=\\"ticket-pagetitle\\">[[%ticket_pagetitle]]<\\/label>\\r\\n        <input type=\\"text\\" class=\\"form-control\\" placeholder=\\"[[%ticket_pagetitle]]\\" name=\\"pagetitle\\"\\r\\n               value=\\"[[+pagetitle]]\\" maxlength=\\"50\\" id=\\"ticket-pagetitle\\"\\/>\\r\\n        <span class=\\"error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-group\\">\\r\\n        <textarea class=\\"form-control\\" placeholder=\\"[[%ticket_content]]\\" name=\\"content\\" id=\\"ticket-editor\\" rows=\\"10\\">[[+content]]<\\/textarea>\\r\\n        <span class=\\"error\\" id=\\"content-error\\"><\\/span>\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"ticket-form-files\\">\\r\\n        [[+files]]\\r\\n    <\\/div>\\r\\n\\r\\n    <div class=\\"form-actions row\\">\\r\\n        <div class=\\"col-md-4\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_preview]]\\" title=\\"Ctrl + Enter\\"\\/>\\r\\n        <\\/div>\\r\\n        <div class=\\"col-md-8 move-right\\">\\r\\n            [[+published:is=`1`:then=`\\r\\n            <a href=\\"[[~[[+id]]?scheme=`full`]]\\" class=\\"btn btn-default btn-xs\\" target=\\"_blank\\">[[%ticket_open]]<\\/a>\\r\\n            <input type=\\"button\\" class=\\"btn btn-danger draft\\" name=\\"draft\\" value=\\"[[%ticket_draft]]\\" title=\\"\\"\\/>\\r\\n            `:else=`\\r\\n            <input type=\\"button\\" class=\\"btn btn-primary publish\\" name=\\"publish\\" value=\\"[[%ticket_publish]]\\" title=\\"\\"\\/>\\r\\n            `]]\\r\\n            <input type=\\"submit\\" class=\\"btn btn-default save\\" name=\\"save\\" value=\\"[[%ticket_save]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n            [[+allowDelete:is=`1`:then=`\\r\\n                [[+deleted:is=`1`:then=`\\r\\n                <input type=\\"button\\" class=\\"btn btn-default undelete\\" data-confirm=\\"[[%ticket_undelete_text]]\\" name=\\"undelete\\" value=\\"[[%ticket_undelete]]\\"\\/>\\r\\n                `:else=`\\r\\n                <input type=\\"button\\" class=\\"btn btn-default delete\\" data-confirm=\\"[[%ticket_delete_text]]\\" name=\\"delete\\" value=\\"[[%ticket_delete]]\\"\\/>\\r\\n                `]]\\r\\n            `]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n<\\/form>"}',
        'guid' => 'b0de4a14fc8349416e6edb6cc16ae172',
        'native_key' => NULL,
        'signature' => 'dbb53133319e7527a32ddfa02ecfd8e6',
      ),
      '3af59754e1af4067621a397daa32d62f' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.preview","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h3 class=\\"title\\">[[+pagetitle]]<\\/h3>\\r\\n<div class=\\"content\\">[[+content]]<\\/div>\\r\\n<h5 class=\\"author\\">[[+modx.user.id:userinfo=`username`]]<\\/h5>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_preview.tpl","content":"<h3 class=\\"title\\">[[+pagetitle]]<\\/h3>\\r\\n<div class=\\"content\\">[[+content]]<\\/div>\\r\\n<h5 class=\\"author\\">[[+modx.user.id:userinfo=`username`]]<\\/h5>\\r\\n"}',
        'guid' => 'fe8a54d3f6fa3d6232cc5501167f0394',
        'native_key' => NULL,
        'signature' => 'ffa432e2b6699900062292c3df13950b',
      ),
      'c7f6b9a05d7ced4de0e7b7d1120780b3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.files","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"ticket-files-list\\">\\r\\n    [[+files]]\\r\\n    <div class=\\"clearfix\\"><\\/div>\\r\\n<\\/div>\\r\\n\\r\\n<div id=\\"ticket-files-container\\" data-action=\\"ticket\\/file\\/upload\\">\\r\\n    <a id=\\"ticket-files-select\\" href=\\"javascript:;\\">[[%ticket_file_select]]<\\/a>\\r\\n    <div id=\\"ticket-files-progress\\">\\r\\n        <span id=\\"ticket-files-progress-count\\">0\\/0<\\/span>\\r\\n        <span id=\\"ticket-files-progress-percent\\">0%<\\/span>\\r\\n        <div id=\\"ticket-files-progress-bar\\"><\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_files.tpl","content":"<div id=\\"ticket-files-list\\">\\r\\n    [[+files]]\\r\\n    <div class=\\"clearfix\\"><\\/div>\\r\\n<\\/div>\\r\\n\\r\\n<div id=\\"ticket-files-container\\" data-action=\\"ticket\\/file\\/upload\\">\\r\\n    <a id=\\"ticket-files-select\\" href=\\"javascript:;\\">[[%ticket_file_select]]<\\/a>\\r\\n    <div id=\\"ticket-files-progress\\">\\r\\n        <span id=\\"ticket-files-progress-count\\">0\\/0<\\/span>\\r\\n        <span id=\\"ticket-files-progress-percent\\">0%<\\/span>\\r\\n        <div id=\\"ticket-files-progress-bar\\"><\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>"}',
        'guid' => '3d5c3c70d58019c9255fdaf10b95ce46',
        'native_key' => NULL,
        'signature' => 'a3c02507d85471d7a3d9266ee19ff73b',
      ),
      '5e69e3c42b845dc117c5158490b77435' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.file","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\r\\n    <a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\r\\n        <div class=\\"ticket-file-image-wrapper\\">\\r\\n            [[+file]]\\r\\n        <\\/div>\\r\\n    <\\/a>\\r\\n    <div class=\\"ticket-file-meta\\">\\r\\n        <a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\r\\n        <br\\/>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\r\\n        <br\\/>\\r\\n        <span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\r\\n    <\\/div>\\r\\n    <div class=\\"ticket-file-template\\">\\r\\n        <a href=\\"[[+url]]\\">\\r\\n            [[+name]]\\r\\n        <\\/a>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<!--tickets_thumb <img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\" \\/>-->\\r\\n<!--tickets_deleted  deleted-->\\r\\n<!--tickets_new  new-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_file.tpl","content":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\r\\n    <a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\r\\n        <div class=\\"ticket-file-image-wrapper\\">\\r\\n            [[+file]]\\r\\n        <\\/div>\\r\\n    <\\/a>\\r\\n    <div class=\\"ticket-file-meta\\">\\r\\n        <a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\r\\n        <br\\/>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\r\\n        <br\\/>\\r\\n        <span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\r\\n    <\\/div>\\r\\n    <div class=\\"ticket-file-template\\">\\r\\n        <a href=\\"[[+url]]\\">\\r\\n            [[+name]]\\r\\n        <\\/a>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<!--tickets_thumb <img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\" \\/>-->\\r\\n<!--tickets_deleted  deleted-->\\r\\n<!--tickets_new  new-->"}',
        'guid' => '3788ca9820520581ec5be5bc690752c6',
        'native_key' => NULL,
        'signature' => '47502a37689e0956a1b70cbc86c6c457',
      ),
      '64f0f99f3fc8d920e083f6951bab0ef9' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.form.image","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\r\\n    <a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\r\\n        <div class=\\"ticket-file-image-wrapper\\">\\r\\n            <img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\"\\/>\\r\\n        <\\/div>\\r\\n    <\\/a>\\r\\n    <div class=\\"ticket-file-meta\\">\\r\\n        <a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\r\\n        <br\\/>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\r\\n        <br\\/>\\r\\n        <span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\r\\n    <\\/div>\\r\\n    <div class=\\"ticket-file-template\\">\\r\\n        <a href=\\"[[+url]]\\" title=\\"[[+name]]\\">\\r\\n            <img src=\\"[[+thumb]]\\"\\/>\\r\\n        <\\/a>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<!--tickets_deleted  deleted-->\\r\\n<!--tickets_new  new-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.form_image.tpl","content":"<div class=\\"ticket-file[[+deleted]][[+new]]\\" data-id=\\"[[+id]]\\">\\r\\n    <a href=\\"[[+url]]\\" class=\\"ticket-file-link\\" title=\\"[[+file]]\\" target=\\"_blank\\">\\r\\n        <div class=\\"ticket-file-image-wrapper\\">\\r\\n            <img src=\\"[[+thumb]]\\" class=\\"ticket-file-image\\"\\/>\\r\\n        <\\/div>\\r\\n    <\\/a>\\r\\n    <div class=\\"ticket-file-meta\\">\\r\\n        <a href=\\"#\\" class=\\"ticket-file-delete\\">[[%ticket_file_delete]]<\\/a>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-restore\\">[[%ticket_file_restore]]<\\/a>\\r\\n        <br\\/>\\r\\n        <a href=\\"#\\" class=\\"ticket-file-insert\\">[[%ticket_file_insert]]<\\/a>\\r\\n        <br\\/>\\r\\n        <span class=\\"ticket-file-size\\">[[+size]] Kb<\\/span>\\r\\n    <\\/div>\\r\\n    <div class=\\"ticket-file-template\\">\\r\\n        <a href=\\"[[+url]]\\" title=\\"[[+name]]\\">\\r\\n            <img src=\\"[[+thumb]]\\"\\/>\\r\\n        <\\/a>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<!--tickets_deleted  deleted-->\\r\\n<!--tickets_new  new-->"}',
        'guid' => 'e6f2390bfb04e8d5a8fcdfcf2035a48c',
        'native_key' => NULL,
        'signature' => 'b9f43dfcc417318e2872a704382874ca',
      ),
      'f649da8024a57da02752a03c82cebfa1' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.form.files","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"ticket-files-list\\">\\r\\n    [[+files]]\\r\\n    <div class=\\"clearfix\\"><\\/div>\\r\\n<\\/div>\\r\\n\\r\\n<div id=\\"ticket-files-container\\" data-action=\\"comment\\/file\\/upload\\">\\r\\n    <a id=\\"ticket-files-select\\" href=\\"javascript:;\\">[[%ticket_file_select]]<\\/a>\\r\\n    <div id=\\"ticket-files-progress\\">\\r\\n        <span id=\\"ticket-files-progress-count\\">0\\/0<\\/span>\\r\\n        <span id=\\"ticket-files-progress-percent\\">0%<\\/span>\\r\\n        <div id=\\"ticket-files-progress-bar\\"><\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_form_files.tpl","content":"<div id=\\"ticket-files-list\\">\\r\\n    [[+files]]\\r\\n    <div class=\\"clearfix\\"><\\/div>\\r\\n<\\/div>\\r\\n\\r\\n<div id=\\"ticket-files-container\\" data-action=\\"comment\\/file\\/upload\\">\\r\\n    <a id=\\"ticket-files-select\\" href=\\"javascript:;\\">[[%ticket_file_select]]<\\/a>\\r\\n    <div id=\\"ticket-files-progress\\">\\r\\n        <span id=\\"ticket-files-progress-count\\">0\\/0<\\/span>\\r\\n        <span id=\\"ticket-files-progress-percent\\">0%<\\/span>\\r\\n        <div id=\\"ticket-files-progress-bar\\"><\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>"}',
        'guid' => '1cb9d79b2fece050feb0b055766bf9eb',
        'native_key' => NULL,
        'signature' => '8133aaf5bf699523e4d55b2f4101fca6',
      ),
      'c2b600e009592d3a423a111943cb0ebf' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.ticket.latest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"tickets-latest-row\\">\\r\\n    <span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span\\r\\n            class=\\"date\\">[[+date_ago]]<\\/span>\\r\\n    <br\\/>\\r\\n    <span class=\\"section\\">\\r\\n        <i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> <a href=\\"[[~[[+section.id]]]]\\">[[+section.pagetitle]]<\\/a> <span\\r\\n                class=\\"arrow\\">&rarr;<\\/span>\\r\\n    <\\/span>\\r\\n    <span class=\\"ticket\\">\\r\\n        <a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a>\\r\\n    <\\/span>\\r\\n    <nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_latest.tpl","content":"<div class=\\"tickets-latest-row\\">\\r\\n    <span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span\\r\\n            class=\\"date\\">[[+date_ago]]<\\/span>\\r\\n    <br\\/>\\r\\n    <span class=\\"section\\">\\r\\n        <i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> <a href=\\"[[~[[+section.id]]]]\\">[[+section.pagetitle]]<\\/a> <span\\r\\n                class=\\"arrow\\">&rarr;<\\/span>\\r\\n    <\\/span>\\r\\n    <span class=\\"ticket\\">\\r\\n        <a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a>\\r\\n    <\\/span>\\r\\n    <nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\r\\n<\\/div>"}',
        'guid' => '22d48b92ed61ebd4b06c27dc30840d44',
        'native_key' => NULL,
        'signature' => '2f8e1e1098a8081da6c8e9ecb4a4a409',
      ),
      '78f43b5c0d97b6c7c3685434b98af601' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.ticket.email.bcc","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_email_bcc_intro?\\r\\n&fullname=`[[+user.fullname]]`\\r\\n&email=`[[+user.email]]`\\r\\n&id=`[[+id]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[%ticket_email_view]]<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_email_bcc.tpl","content":"[[%ticket_email_bcc_intro?\\r\\n&fullname=`[[+user.fullname]]`\\r\\n&email=`[[+user.email]]`\\r\\n&id=`[[+id]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[%ticket_email_view]]<\\/a>"}',
        'guid' => '0938958bfe4650596db2dc3530b6b945',
        'native_key' => NULL,
        'signature' => '344ff2a393802216acfb5419a3450755',
      ),
      '37023bb46e1668cb69aca84c91de5b45' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.ticket.email.subscription","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_email_subscribed_intro?\\r\\n&id=`[[+id]]`\\r\\n&fullname=`[[+user.fullname]]`\\r\\n&section=`[[+section.id]]`\\r\\n&section_title=`[[+section.pagetitle]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[%ticket_email_view]]<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_email_subscription.tpl","content":"[[%ticket_email_subscribed_intro?\\r\\n&id=`[[+id]]`\\r\\n&fullname=`[[+user.fullname]]`\\r\\n&section=`[[+section.id]]`\\r\\n&section_title=`[[+section.pagetitle]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[%ticket_email_view]]<\\/a>"}',
        'guid' => 'f1e43da11836a00c51ca34af2feff257',
        'native_key' => NULL,
        'signature' => 'fcd7bdd91648328cb7c7df9c928074ff',
      ),
      '8c46eb3fcfb544f50c121c648e9a11f3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.form","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h4 id=\\"comment-new-link\\">\\r\\n    <a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\r\\n<\\/h4>\\r\\n\\r\\n<div id=\\"comment-form-placeholder\\">\\r\\n    <form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\r\\n        <div id=\\"comment-preview-placeholder\\"><\\/div>\\r\\n        <input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"id\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"form_key\\" value=\\"[[+formkey]]\\">\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-editor\\"><\\/label>\\r\\n            <textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\r\\n            <span class=\\"error\\" id=\\"text-error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"comment-form-files\\">\\r\\n            [[+files]]\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"form-actions\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\"\\r\\n                   title=\\"Ctrl + Enter\\"\\/>\\r\\n            <input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n            <span class=\\"time\\"><\\/span>\\r\\n        <\\/div>\\r\\n    <\\/form>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_form.tpl","content":"<h4 id=\\"comment-new-link\\">\\r\\n    <a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\r\\n<\\/h4>\\r\\n\\r\\n<div id=\\"comment-form-placeholder\\">\\r\\n    <form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\r\\n        <div id=\\"comment-preview-placeholder\\"><\\/div>\\r\\n        <input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"id\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"form_key\\" value=\\"[[+formkey]]\\">\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-editor\\"><\\/label>\\r\\n            <textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\r\\n            <span class=\\"error\\" id=\\"text-error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"comment-form-files\\">\\r\\n            [[+files]]\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"form-actions\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\"\\r\\n                   title=\\"Ctrl + Enter\\"\\/>\\r\\n            <input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n            <span class=\\"time\\"><\\/span>\\r\\n        <\\/div>\\r\\n    <\\/form>\\r\\n<\\/div>"}',
        'guid' => '0116737a7908b4e4428d2f1d1f6e9714',
        'native_key' => NULL,
        'signature' => '98f8c9782b85e646ec6a06c410e3a389',
      ),
      'e754f0a95b7f7be60ba76a1070882e9d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.form.guest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h4 id=\\"comment-new-link\\">\\r\\n    <a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\r\\n<\\/h4>\\r\\n\\r\\n<div id=\\"comment-form-placeholder\\">\\r\\n    <form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\r\\n        <div id=\\"comment-preview-placeholder\\"><\\/div>\\r\\n        <input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"id\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"form_key\\" value=\\"[[+formkey]]\\">\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-name\\">[[%ticket_comment_name]]<\\/label>\\r\\n            <input type=\\"text\\" name=\\"name\\" value=\\"[[+name]]\\" id=\\"comment-name\\" class=\\"form-control\\"\\/>\\r\\n            <span class=\\"error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-email\\">[[%ticket_comment_email]]<\\/label>\\r\\n            <input type=\\"text\\" name=\\"email\\" value=\\"[[+email]]\\" id=\\"comment-email\\" class=\\"form-control\\"\\/>\\r\\n            <span class=\\"error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-editor\\"><\\/label>\\r\\n            <textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\r\\n            <span class=\\"error\\" id=\\"text-error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        [[+allowFiles:is=`1`:then=`\\r\\n            [[%ticket_comment_upload_auth]]\\r\\n        `]]\\r\\n\\r\\n        [[+captcha]]\\r\\n\\r\\n        <div class=\\"form-actions\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\"\\r\\n                   title=\\"Ctrl + Enter\\"\\/>\\r\\n            <input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n            <span class=\\"time\\"><\\/span>\\r\\n        <\\/div>\\r\\n    <\\/form>\\r\\n<\\/div>\\r\\n\\r\\n<!--tickets_captcha\\r\\n<div class=\\"form-group\\">\\r\\n    <label for=\\"comment-captcha\\" id=\\"comment-captcha\\">[[+captcha]]<\\/label>\\r\\n    <input type=\\"text\\" name=\\"captcha\\" value=\\"\\" id=\\"comment-captcha\\" class=\\"form-control\\" \\/>\\r\\n    <span class=\\"error\\"><\\/span>\\r\\n<\\/div>\\r\\n-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_form_guest.tpl","content":"<h4 id=\\"comment-new-link\\">\\r\\n    <a href=\\"#\\" class=\\"btn btn-default\\">[[%ticket_comment_create]]<\\/a>\\r\\n<\\/h4>\\r\\n\\r\\n<div id=\\"comment-form-placeholder\\">\\r\\n    <form id=\\"comment-form\\" action=\\"\\" method=\\"post\\" class=\\"well\\">\\r\\n        <div id=\\"comment-preview-placeholder\\"><\\/div>\\r\\n        <input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"parent\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"id\\" value=\\"0\\"\\/>\\r\\n        <input type=\\"hidden\\" name=\\"form_key\\" value=\\"[[+formkey]]\\">\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-name\\">[[%ticket_comment_name]]<\\/label>\\r\\n            <input type=\\"text\\" name=\\"name\\" value=\\"[[+name]]\\" id=\\"comment-name\\" class=\\"form-control\\"\\/>\\r\\n            <span class=\\"error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-email\\">[[%ticket_comment_email]]<\\/label>\\r\\n            <input type=\\"text\\" name=\\"email\\" value=\\"[[+email]]\\" id=\\"comment-email\\" class=\\"form-control\\"\\/>\\r\\n            <span class=\\"error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        <div class=\\"form-group\\">\\r\\n            <label for=\\"comment-editor\\"><\\/label>\\r\\n            <textarea name=\\"text\\" id=\\"comment-editor\\" cols=\\"30\\" rows=\\"10\\" class=\\"form-control\\"><\\/textarea>\\r\\n            <span class=\\"error\\" id=\\"text-error\\"><\\/span>\\r\\n        <\\/div>\\r\\n\\r\\n        [[+allowFiles:is=`1`:then=`\\r\\n            [[%ticket_comment_upload_auth]]\\r\\n        `]]\\r\\n\\r\\n        [[+captcha]]\\r\\n\\r\\n        <div class=\\"form-actions\\">\\r\\n            <input type=\\"button\\" class=\\"btn btn-default preview\\" value=\\"[[%ticket_comment_preview]]\\"\\r\\n                   title=\\"Ctrl + Enter\\"\\/>\\r\\n            <input type=\\"submit\\" class=\\"btn btn-primary submit\\" value=\\"[[%ticket_comment_save]]\\"\\r\\n                   title=\\"Ctrl + Shift + Enter\\"\\/>\\r\\n            <span class=\\"time\\"><\\/span>\\r\\n        <\\/div>\\r\\n    <\\/form>\\r\\n<\\/div>\\r\\n\\r\\n<!--tickets_captcha\\r\\n<div class=\\"form-group\\">\\r\\n    <label for=\\"comment-captcha\\" id=\\"comment-captcha\\">[[+captcha]]<\\/label>\\r\\n    <input type=\\"text\\" name=\\"captcha\\" value=\\"\\" id=\\"comment-captcha\\" class=\\"form-control\\" \\/>\\r\\n    <span class=\\"error\\"><\\/span>\\r\\n<\\/div>\\r\\n-->"}',
        'guid' => 'a23de4b51c7f69c05b78c439c9e9a693',
        'native_key' => NULL,
        'signature' => '46982d05924091dd6a2188b51d6b3df4',
      ),
      '53fcc356f30feeffc6786bd43da92d99' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.one.auth","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ticket-comment[[+comment_new]]\\" id=\\"comment-[[+id]]\\" data-parent=\\"[[+parent]]\\"\\r\\n    data-newparent=\\"[[+new_parent]]\\" data-id=\\"[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body[[+guest]][[+bad]]\\">\\r\\n        <div class=\\"ticket-comment-header\\">\\r\\n            <div class=\\"ticket-comment-dot-wrapper\\">\\r\\n                <div class=\\"ticket-comment-dot\\"><\\/div>\\r\\n            <\\/div>\\r\\n            <img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\"\\/>\\r\\n            <span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\r\\n            <span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\r\\n            <span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\r\\n            <span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\r\\n            [[+has_parent]]\\r\\n            <span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\r\\n            <span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\r\\n                <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\"\\r\\n                      title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\r\\n                <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\r\\n                <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\r\\n            <\\/span>\\r\\n        <\\/div>\\r\\n        <div class=\\"ticket-comment-text\\">\\r\\n            [[+text]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n    <div class=\\"comment-reply\\">\\r\\n        <a href=\\"#\\" class=\\"reply\\">[[%ticket_comment_reply]]<\\/a>\\r\\n        [[+comment_edit_link]]\\r\\n    <\\/div>\\r\\n    <ol class=\\"comments-list\\">[[+children]]<\\/ol>\\r\\n<\\/li>\\r\\n<!--tickets_comment_edit_link <a href=\\"#\\" class=\\"edit\\">[[%ticket_comment_edit]]<\\/a>-->\\r\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\r\\n<!--tickets_comment_new  ticket-comment-new-->\\r\\n<!--tickets_can_vote  active-->\\r\\n<!--tickets_cant_vote  inactive-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_guest  ticket-comment-guest-->\\r\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_one_auth.tpl","content":"<li class=\\"ticket-comment[[+comment_new]]\\" id=\\"comment-[[+id]]\\" data-parent=\\"[[+parent]]\\"\\r\\n    data-newparent=\\"[[+new_parent]]\\" data-id=\\"[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body[[+guest]][[+bad]]\\">\\r\\n        <div class=\\"ticket-comment-header\\">\\r\\n            <div class=\\"ticket-comment-dot-wrapper\\">\\r\\n                <div class=\\"ticket-comment-dot\\"><\\/div>\\r\\n            <\\/div>\\r\\n            <img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\"\\/>\\r\\n            <span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\r\\n            <span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\r\\n            <span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\r\\n            <span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\r\\n            [[+has_parent]]\\r\\n            <span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\r\\n            <span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\r\\n                <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\"\\r\\n                      title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\r\\n                <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\r\\n                <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\r\\n            <\\/span>\\r\\n        <\\/div>\\r\\n        <div class=\\"ticket-comment-text\\">\\r\\n            [[+text]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n    <div class=\\"comment-reply\\">\\r\\n        <a href=\\"#\\" class=\\"reply\\">[[%ticket_comment_reply]]<\\/a>\\r\\n        [[+comment_edit_link]]\\r\\n    <\\/div>\\r\\n    <ol class=\\"comments-list\\">[[+children]]<\\/ol>\\r\\n<\\/li>\\r\\n<!--tickets_comment_edit_link <a href=\\"#\\" class=\\"edit\\">[[%ticket_comment_edit]]<\\/a>-->\\r\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\r\\n<!--tickets_comment_new  ticket-comment-new-->\\r\\n<!--tickets_can_vote  active-->\\r\\n<!--tickets_cant_vote  inactive-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_guest  ticket-comment-guest-->\\r\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->\\r\\n"}',
        'guid' => '07c734dbbe0e355166efbc5c737deb00',
        'native_key' => NULL,
        'signature' => '6310c716172c51fa085426d95dc56b36',
      ),
      '81ee520434578343ea8aaebc2a56082f' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.one.guest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body[[+bad]]\\">\\r\\n        <div class=\\"ticket-comment-header\\">\\r\\n            <div class=\\"ticket-comment-dot-wrapper\\">\\r\\n                <div class=\\"ticket-comment-dot\\"><\\/div>\\r\\n            <\\/div>\\r\\n            <img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\"\\/>\\r\\n            <span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\r\\n            <span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>\\r\\n            <span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\r\\n\\r\\n            [[+has_parent]]\\r\\n            <span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\r\\n\\r\\n            <span class=\\"ticket-comment-rating inactive\\">\\r\\n                <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\">\\r\\n                    [[+rating]]\\r\\n                <\\/span>\\r\\n                <span class=\\"plus\\" title=\\"[[%ticket_like]]\\">\\r\\n                    <i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\r\\n                <\\/span>\\r\\n                <span class=\\"minus\\" title=\\"[[%ticket_dislike]]\\">\\r\\n                    <i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\r\\n                <\\/span>\\r\\n            <\\/span>\\r\\n        <\\/div>\\r\\n        <div class=\\"ticket-comment-text\\">\\r\\n            [[+text]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n    <ol class=\\"comments-list\\">[[+children]]<\\/ol>\\r\\n<\\/li>\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_one_guest.tpl","content":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body[[+bad]]\\">\\r\\n        <div class=\\"ticket-comment-header\\">\\r\\n            <div class=\\"ticket-comment-dot-wrapper\\">\\r\\n                <div class=\\"ticket-comment-dot\\"><\\/div>\\r\\n            <\\/div>\\r\\n            <img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\"\\/>\\r\\n            <span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\r\\n            <span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>\\r\\n            <span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\r\\n\\r\\n            [[+has_parent]]\\r\\n            <span class=\\"ticket-comment-down\\"><a href=\\"#\\" data-child=\\"\\">&darr;<\\/a><\\/span>\\r\\n\\r\\n            <span class=\\"ticket-comment-rating inactive\\">\\r\\n                <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\">\\r\\n                    [[+rating]]\\r\\n                <\\/span>\\r\\n                <span class=\\"plus\\" title=\\"[[%ticket_like]]\\">\\r\\n                    <i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\r\\n                <\\/span>\\r\\n                <span class=\\"minus\\" title=\\"[[%ticket_dislike]]\\">\\r\\n                    <i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\r\\n                <\\/span>\\r\\n            <\\/span>\\r\\n        <\\/div>\\r\\n        <div class=\\"ticket-comment-text\\">\\r\\n            [[+text]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n    <ol class=\\"comments-list\\">[[+children]]<\\/ol>\\r\\n<\\/li>\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_has_parent <span class=\\"ticket-comment-up\\"><a href=\\"[[+url]]#comment-[[+parent]]\\" data-id=\\"[[+id]]\\" data-parent=\\"[[+parent]]\\">&uarr;<\\/a><\\/span>-->"}',
        'guid' => '19afeb528776431e511620e5d81fd70b',
        'native_key' => NULL,
        'signature' => '5291dbb1256ae1700d55a7dbdbf0a999',
      ),
      '218f17bd0699a84ab497545bc7ce77e2' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.one.deleted","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body alert alert-warning\\">\\r\\n        [[%ticket_comment_deleted_text]]\\r\\n    <\\/div>\\r\\n    <ol class=\\"comments-list\\">[[+children]]<\\/ol>\\r\\n<\\/li>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_one_deleted.tpl","content":"<li class=\\"ticket-comment\\" id=\\"comment-[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body alert alert-warning\\">\\r\\n        [[%ticket_comment_deleted_text]]\\r\\n    <\\/div>\\r\\n    <ol class=\\"comments-list\\">[[+children]]<\\/ol>\\r\\n<\\/li>\\r\\n"}',
        'guid' => '7e58d71226436550b0d3fb94fd049907',
        'native_key' => NULL,
        'signature' => '5d3c7a6346eb2394fce6e74ba5d3a67b',
      ),
      '428ce28a369cdd27badc12d95a228a39' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.wrapper","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"comments\\">\\r\\n    [[+modx.user.id:isloggedin:is=`1`:then=`\\r\\n    <span class=\\"comments-subscribe pull-right\\">\\r\\n        <label for=\\"comments-subscribe\\" class=\\"checkbox\\">\\r\\n            <input type=\\"checkbox\\" name=\\"\\" id=\\"comments-subscribe\\" value=\\"1\\" [[+subscribed]]\\/> [[%ticket_comment_notify]]\\r\\n        <\\/label>\\r\\n    <\\/span>\\r\\n    `:else=``]]\\r\\n\\r\\n    <h3 class=\\"title\\">[[%comments]] (<span id=\\"comment-total\\">[[+total]]<\\/span>)<\\/h3>\\r\\n\\r\\n    <div id=\\"comments-wrapper\\">\\r\\n        <ol class=\\"comment-list\\" id=\\"comments\\">[[+comments]]<\\/ol>\\r\\n    <\\/div>\\r\\n\\r\\n    <div id=\\"comments-tpanel\\">\\r\\n        <div id=\\"tpanel-refresh\\"><\\/div>\\r\\n        <div id=\\"tpanel-new\\"><\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n\\r\\n<!--tickets_subscribed checked-->\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_wrapper.tpl","content":"<div class=\\"comments\\">\\r\\n    [[+modx.user.id:isloggedin:is=`1`:then=`\\r\\n    <span class=\\"comments-subscribe pull-right\\">\\r\\n        <label for=\\"comments-subscribe\\" class=\\"checkbox\\">\\r\\n            <input type=\\"checkbox\\" name=\\"\\" id=\\"comments-subscribe\\" value=\\"1\\" [[+subscribed]]\\/> [[%ticket_comment_notify]]\\r\\n        <\\/label>\\r\\n    <\\/span>\\r\\n    `:else=``]]\\r\\n\\r\\n    <h3 class=\\"title\\">[[%comments]] (<span id=\\"comment-total\\">[[+total]]<\\/span>)<\\/h3>\\r\\n\\r\\n    <div id=\\"comments-wrapper\\">\\r\\n        <ol class=\\"comment-list\\" id=\\"comments\\">[[+comments]]<\\/ol>\\r\\n    <\\/div>\\r\\n\\r\\n    <div id=\\"comments-tpanel\\">\\r\\n        <div id=\\"tpanel-refresh\\"><\\/div>\\r\\n        <div id=\\"tpanel-new\\"><\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n\\r\\n<!--tickets_subscribed checked-->\\r\\n"}',
        'guid' => '9bab5c47f6fb0d5930ccbcfeb28339f0',
        'native_key' => NULL,
        'signature' => 'df00c9678f79483b198781390960c9c7',
      ),
      '9c178e00d6751306beab7194878dab83' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.login","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-comments alert alert-warning\\">\\r\\n    <p>[[%ticket_comment_err_no_auth]]<\\/p>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_login.tpl","content":"<div class=\\"ticket-comments alert alert-warning\\">\\r\\n    <p>[[%ticket_comment_err_no_auth]]<\\/p>\\r\\n<\\/div>"}',
        'guid' => 'c86a07be4e0fda2ae04f425fb089d896',
        'native_key' => NULL,
        'signature' => 'ad13a1d5d55c631951289fa280130f3b',
      ),
      '6ff49c0de0a92a69ecae54530ece80fe' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.latest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"tickets-latest-row[[+guest]]\\">\\r\\n    <span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span\\r\\n            class=\\"date\\">[[+date_ago]]<\\/span>\\r\\n    <br\\/>\\r\\n    <span class=\\"ticket\\">\\r\\n        <a href=\\"[[~[[+ticket.id]]]]#comment-[[+id]]\\">[[+ticket.pagetitle]]<\\/a>\\r\\n    <\\/span>\\r\\n    <nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\r\\n<\\/div>\\r\\n<!--tickets_guest  ticket-comment-guest-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_latest.tpl","content":"<div class=\\"tickets-latest-row[[+guest]]\\">\\r\\n    <span class=\\"user\\"><i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]<\\/span> <span\\r\\n            class=\\"date\\">[[+date_ago]]<\\/span>\\r\\n    <br\\/>\\r\\n    <span class=\\"ticket\\">\\r\\n        <a href=\\"[[~[[+ticket.id]]]]#comment-[[+id]]\\">[[+ticket.pagetitle]]<\\/a>\\r\\n    <\\/span>\\r\\n    <nobr><i class=\\"glyphicon glyphicon-comment\\"><\\/i> <span class=\\"comments\\">[[+comments]]<\\/span><\\/nobr>\\r\\n<\\/div>\\r\\n<!--tickets_guest  ticket-comment-guest-->"}',
        'guid' => 'f4a24fb580f9b7fd5151d767c4635179',
        'native_key' => NULL,
        'signature' => '6e225fec2d84b64cd304cd7d89476e33',
      ),
      'a41db008ea895dd269ca61af091f1909' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.owner","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_comment_email_owner_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_reply]]<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_owner.tpl","content":"[[%ticket_comment_email_owner_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_reply]]<\\/a>"}',
        'guid' => 'bfa0bb10a77ef158749dbdf2dc1d56de',
        'native_key' => NULL,
        'signature' => '033b9a118781fc502d1200011e233a1a',
      ),
      'ce6b0066a6a00fe254bc17f2f412e5d0' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.reply","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_comment_email_reply_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_reply]]<\\/a>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n[[%ticket_comment_email_reply_text]]\\r\\n<pre>[[+parent_text]]<\\/pre>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_reply.tpl","content":"[[%ticket_comment_email_reply_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_reply]]<\\/a>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n[[%ticket_comment_email_reply_text]]\\r\\n<pre>[[+parent_text]]<\\/pre>"}',
        'guid' => '73281b924344f5689956cfd9e3477e88',
        'native_key' => NULL,
        'signature' => '865bc73c9710cca15c3745197df22d54',
      ),
      '6c62887561c6b597a4d22f2ab4b52482' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.subscription","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_comment_email_subscription_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_view]]<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_subscription.tpl","content":"[[%ticket_comment_email_subscription_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_view]]<\\/a>"}',
        'guid' => 'd3d28f7561fa0635945ccd4545c6874c',
        'native_key' => NULL,
        'signature' => 'da61f997f850e1d335175257e3e91db7',
      ),
      '8d9eb695d9381c2e57cfb9fa64e74b91' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.bcc","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_comment_email_bcc_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_view]]<\\/a>\\r\\n","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_bcc.tpl","content":"[[%ticket_comment_email_bcc_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+resource]]?scheme=`full`]]#comment-[[+id]]\\">[[%ticket_email_view]]<\\/a>\\r\\n"}',
        'guid' => '47c2e5779b25611910b8c73418adb3b0',
        'native_key' => NULL,
        'signature' => '851bcb92da1057e3441084765711a996',
      ),
      '114836efaa9c99061dac61230f876ea9' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.email.unpublished","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_comment_email_unpublished_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[+manager_url]]\\">[[%ticket_email_all_comments]]<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_email_unpublished.tpl","content":"[[%ticket_comment_email_unpublished_intro?\\r\\n&name=`[[+name]]`\\r\\n&resource=`[[+resource]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre>[[+text]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[+manager_url]]\\">[[%ticket_email_all_comments]]<\\/a>"}',
        'guid' => 'ac997c7f51b62d36b7727b7570a18cc4',
        'native_key' => NULL,
        'signature' => '61dccf5d7d129c0daefff7c37b3b86c6',
      ),
      'd8045a77389ab4f5904157dac33e4c76' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.comment.list.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-comment-row ticket-comment\\" id=\\"comment-[[+id]]\\" data-id=\\"[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body[[+guest]]\\">\\r\\n        <div class=\\"ticket-comment-header\\">\\r\\n            <img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\"\\/>\\r\\n            <span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\r\\n            <span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\r\\n            <span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\r\\n            <span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\r\\n\\r\\n            <span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\r\\n                <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\"\\r\\n                      title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\r\\n                <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\r\\n                <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\r\\n            <\\/span>\\r\\n        <\\/div>\\r\\n        <div class=\\"ticket-comment-text\\">\\r\\n            [[+text]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n\\r\\n    <a href=\\"[[~[[+section.id]]]]\\" class=\\"ticket-comment-section\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i>\\r\\n        [[+section.pagetitle]]<\\/a> &rarr;\\r\\n    <a href=\\"[[~[[+ticket.id]]]]\\" class=\\"ticket-comment-ticket\\">[[+ticket.pagetitle]]<\\/a> &nbsp;\\r\\n    <span class=\\"ticket-comment-comments\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/span>\\r\\n<\\/div>\\r\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\r\\n<!--tickets_can_vote  active-->\\r\\n<!--tickets_cant_vote  inactive-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_guest  ticket-comment-guest-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.comment_list_row.tpl","content":"<div class=\\"ticket-comment-row ticket-comment\\" id=\\"comment-[[+id]]\\" data-id=\\"[[+id]]\\">\\r\\n    <div class=\\"ticket-comment-body[[+guest]]\\">\\r\\n        <div class=\\"ticket-comment-header\\">\\r\\n            <img src=\\"[[+avatar]]\\" class=\\"ticket-avatar\\" alt=\\"\\"\\/>\\r\\n            <span class=\\"ticket-comment-author\\">[[+fullname]]<\\/span>\\r\\n            <span class=\\"ticket-comment-createdon\\">[[+date_ago]]<\\/span>[[+comment_was_edited]]\\r\\n            <span class=\\"ticket-comment-link\\"><a href=\\"[[+url]]#comment-[[+id]]\\">#<\\/a><\\/span>\\r\\n            <span class=\\"ticket-comment-star[[+can_star]]\\">[[+stared]][[+unstared]]<\\/span>\\r\\n\\r\\n            <span class=\\"ticket-comment-rating[[+can_vote]][[+cant_vote]]\\">\\r\\n                <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\"\\r\\n                      title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>\\r\\n                <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\r\\n                <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i\\r\\n                            class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\r\\n            <\\/span>\\r\\n        <\\/div>\\r\\n        <div class=\\"ticket-comment-text\\">\\r\\n            [[+text]]\\r\\n        <\\/div>\\r\\n    <\\/div>\\r\\n\\r\\n    <a href=\\"[[~[[+section.id]]]]\\" class=\\"ticket-comment-section\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i>\\r\\n        [[+section.pagetitle]]<\\/a> &rarr;\\r\\n    <a href=\\"[[~[[+ticket.id]]]]\\" class=\\"ticket-comment-ticket\\">[[+ticket.pagetitle]]<\\/a> &nbsp;\\r\\n    <span class=\\"ticket-comment-comments\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/span>\\r\\n<\\/div>\\r\\n<!--tickets_comment_was_edited <span class=\\"ticket-comment-edited\\">([[%ticket_comment_was_edited]])<\\/span>-->\\r\\n<!--tickets_can_vote  active-->\\r\\n<!--tickets_cant_vote  inactive-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_guest  ticket-comment-guest-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->"}',
        'guid' => 'ba135600900c8d9a25507921d08815c0',
        'native_key' => NULL,
        'signature' => '8d5a967dec0ebd2d106f7c39b594ef5c',
      ),
      '03a46b5bf6c5db6d539359402c9a912d' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.list.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"tickets-row\\">\\r\\n    <h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\r\\n    <div class=\\"content\\">\\r\\n        [[+introtext]]<br\\/>\\r\\n        <a href=\\"[[~[[+id]]]]#cut\\" class=\\"btn btn-default ticket-read-more\\">[[%ticket_read_more]]<\\/a>\\r\\n    <\\/div>\\r\\n    <div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\r\\n        <span class=\\"col-md-5\\">\\r\\n            <i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\r\\n            &nbsp;&nbsp;\\r\\n            <i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\r\\n        <\\/span>\\r\\n        <span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a><\\/span>\\r\\n        <span class=\\"col-md-3\\">\\r\\n            <span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span\\r\\n                        class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\r\\n            &nbsp;&nbsp;\\r\\n            <i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\r\\n            &nbsp;&nbsp;\\r\\n            <i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]  [[+new_comments]]\\r\\n        <\\/span>\\r\\n        <span class=\\"col-md-2 pull-right ticket-rating[[+active]][[+inactive]]\\">\\r\\n            <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\r\\n            [[+can_vote]][[+cant_vote]]\\r\\n            <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i\\r\\n                        class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\r\\n        <\\/span>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\r\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\r\\n<!--tickets_new_comments <span class=\\"ticket-new-comments\\">+[[+new_comments]]<\\/span>-->\\r\\n<!--tickets_active  active-->\\r\\n<!--tickets_inactive  inactive-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_list_row.tpl","content":"<div class=\\"tickets-row\\">\\r\\n    <h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\r\\n    <div class=\\"content\\">\\r\\n        [[+introtext]]<br\\/>\\r\\n        <a href=\\"[[~[[+id]]]]#cut\\" class=\\"btn btn-default ticket-read-more\\">[[%ticket_read_more]]<\\/a>\\r\\n    <\\/div>\\r\\n    <div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\r\\n        <span class=\\"col-md-5\\">\\r\\n            <i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\r\\n            &nbsp;&nbsp;\\r\\n            <i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\r\\n        <\\/span>\\r\\n        <span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\"><i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a><\\/span>\\r\\n        <span class=\\"col-md-3\\">\\r\\n            <span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span\\r\\n                        class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\r\\n            &nbsp;&nbsp;\\r\\n            <i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\r\\n            &nbsp;&nbsp;\\r\\n            <i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]  [[+new_comments]]\\r\\n        <\\/span>\\r\\n        <span class=\\"col-md-2 pull-right ticket-rating[[+active]][[+inactive]]\\">\\r\\n            <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\"><i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i><\\/span>\\r\\n            [[+can_vote]][[+cant_vote]]\\r\\n            <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\"><i\\r\\n                        class=\\"glyphicon glyphicon-arrow-down\\"><\\/i><\\/span>\\r\\n        <\\/span>\\r\\n    <\\/div>\\r\\n<\\/div>\\r\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\r\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\r\\n<!--tickets_new_comments <span class=\\"ticket-new-comments\\">+[[+new_comments]]<\\/span>-->\\r\\n<!--tickets_active  active-->\\r\\n<!--tickets_inactive  inactive-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->"}',
        'guid' => '30ea7dc387307c1c8d2675027f1bec5e',
        'native_key' => NULL,
        'signature' => '78dfb60329ebf0579dee487d730b61af',
      ),
      'ce5594852a5c2c41b197f23d9563ae6b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.sections.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"section-row\\">\\r\\n    <h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\r\\n    <div class=\\"content\\">\\r\\n        [[+introtext]]\\r\\n    <\\/div>\\r\\n    <div class=\\"section-meta row\\">\\r\\n        <div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-th-list\\"><\\/i> [[+tickets]]<\\/div>\\r\\n        <div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]<\\/div>\\r\\n        <div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_sections_row.tpl","content":"<div class=\\"section-row\\">\\r\\n    <h3 class=\\"title\\"><a href=\\"[[~[[+id]]]]\\">[[+pagetitle]]<\\/a><\\/h3>\\r\\n    <div class=\\"content\\">\\r\\n        [[+introtext]]\\r\\n    <\\/div>\\r\\n    <div class=\\"section-meta row\\">\\r\\n        <div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-th-list\\"><\\/i> [[+tickets]]<\\/div>\\r\\n        <div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]<\\/div>\\r\\n        <div class=\\"col-md-1\\"><i class=\\"glyphicon glyphicon-comment\\"><\\/i> [[+comments]]<\\/div>\\r\\n    <\\/div>\\r\\n<\\/div>"}',
        'guid' => '221cf54422608536112989e20cb03838',
        'native_key' => NULL,
        'signature' => 'e7243f8a9ecf21d8d4cce52852884232',
      ),
      'ea3ba87d804fdd56df27f01c1829e543' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.sections.wrapper","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[+modx.user.id:isloggedin:is=`1`:then=`\\r\\n<span class=\\"tickets-subscribe pull-right\\">\\r\\n    <label for=\\"tickets-subscribe\\" class=\\"checkbox\\">\\r\\n        <input type=\\"checkbox\\" name=\\"\\" id=\\"tickets-subscribe\\" value=\\"1\\" data-id=\\"[[*id]]\\"\\r\\n               [[+subscribed:notempty=`checked`]]\\/> [[%tickets_section_notify]]\\r\\n    <\\/label>\\r\\n<\\/span>\\r\\n`:else=``]]\\r\\n\\r\\n<div class=\\"tickets-list\\">\\r\\n    [[+output]]\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_sections_wrapper.tpl","content":"[[+modx.user.id:isloggedin:is=`1`:then=`\\r\\n<span class=\\"tickets-subscribe pull-right\\">\\r\\n    <label for=\\"tickets-subscribe\\" class=\\"checkbox\\">\\r\\n        <input type=\\"checkbox\\" name=\\"\\" id=\\"tickets-subscribe\\" value=\\"1\\" data-id=\\"[[*id]]\\"\\r\\n               [[+subscribed:notempty=`checked`]]\\/> [[%tickets_section_notify]]\\r\\n    <\\/label>\\r\\n<\\/span>\\r\\n`:else=``]]\\r\\n\\r\\n<div class=\\"tickets-list\\">\\r\\n    [[+output]]\\r\\n<\\/div>"}',
        'guid' => 'eaf3032537506c3825a2b8ca88cd14f4',
        'native_key' => NULL,
        'signature' => '108e3edf217b102180f95116a0837e87',
      ),
      'c3b1af61e69085ee77638eaea7e2835a' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.meta","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\r\\n    <span class=\\"col-md-5\\">\\r\\n        <i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\r\\n        &nbsp;&nbsp;\\r\\n        <i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\r\\n    <\\/span>\\r\\n    <span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\">\\r\\n            <i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a>\\r\\n    <\\/span>\\r\\n    <span class=\\"col-md-2\\">\\r\\n        <span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span\\r\\n                    class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\r\\n        &nbsp;&nbsp;\\r\\n        <i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\r\\n    <\\/span>\\r\\n    <span class=\\"pull-right ticket-rating[[+active]][[+inactive]]\\">\\r\\n        <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\">\\r\\n            <i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\r\\n        <\\/span>\\r\\n        [[+can_vote]][[+cant_vote]]\\r\\n        <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\">\\r\\n            <i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\r\\n        <\\/span>\\r\\n    <\\/span>\\r\\n<\\/div>\\r\\n[[+has_files]]\\r\\n\\r\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\r\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\r\\n<!--tickets_active  active-->\\r\\n<!--tickets_inactive  inactive-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_has_files\\r\\n<ul class=\\"ticket-files\\">\\r\\n    <strong>[[%ticket_uploaded_files]]:<\\/strong>\\r\\n    [[+files]]\\r\\n<\\/ul>-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_meta.tpl","content":"<div class=\\"ticket-meta row\\" data-id=\\"[[+id]]\\">\\r\\n    <span class=\\"col-md-5\\">\\r\\n        <i class=\\"glyphicon glyphicon-calendar\\"><\\/i> [[+date_ago]]\\r\\n        &nbsp;&nbsp;\\r\\n        <i class=\\"glyphicon glyphicon-user\\"><\\/i> [[+fullname]]\\r\\n    <\\/span>\\r\\n    <span class=\\"col-md-2\\"><a href=\\"[[~[[+section.id]]]]\\">\\r\\n            <i class=\\"glyphicon glyphicon-folder-open\\"><\\/i> [[+section.pagetitle]]<\\/a>\\r\\n    <\\/span>\\r\\n    <span class=\\"col-md-2\\">\\r\\n        <span class=\\"ticket-star[[+can_star]]\\">[[+stared]][[+unstared]] <span\\r\\n                    class=\\"ticket-star-count\\">[[+stars]]<\\/span><\\/span>\\r\\n        &nbsp;&nbsp;\\r\\n        <i class=\\"glyphicon glyphicon-eye-open\\"><\\/i> [[+views]]\\r\\n    <\\/span>\\r\\n    <span class=\\"pull-right ticket-rating[[+active]][[+inactive]]\\">\\r\\n        <span class=\\"vote plus[[+voted_plus]]\\" title=\\"[[%ticket_like]]\\">\\r\\n            <i class=\\"glyphicon glyphicon-arrow-up\\"><\\/i>\\r\\n        <\\/span>\\r\\n        [[+can_vote]][[+cant_vote]]\\r\\n        <span class=\\"vote minus[[+voted_minus]]\\" title=\\"[[%ticket_dislike]]\\">\\r\\n            <i class=\\"glyphicon glyphicon-arrow-down\\"><\\/i>\\r\\n        <\\/span>\\r\\n    <\\/span>\\r\\n<\\/div>\\r\\n[[+has_files]]\\r\\n\\r\\n<!--tickets_can_vote <span class=\\"vote rating\\" title=\\"[[%ticket_refrain]]\\"><i class=\\"glyphicon glyphicon-minus\\"><\\/i><\\/span>-->\\r\\n<!--tickets_cant_vote <span class=\\"rating[[+rating_positive]][[+rating_negative]]\\" title=\\"[[%ticket_rating_total]] [[+rating_total]]: \\u2191[[+rating_plus]] [[%ticket_rating_and]] \\u2193[[+rating_minus]]\\">[[+rating]]<\\/span>-->\\r\\n<!--tickets_active  active-->\\r\\n<!--tickets_inactive  inactive-->\\r\\n<!--tickets_voted_plus  voted-->\\r\\n<!--tickets_voted_minus  voted-->\\r\\n<!--tickets_rating_positive  positive-->\\r\\n<!--tickets_rating_negative  negative-->\\r\\n<!--tickets_has_files\\r\\n<ul class=\\"ticket-files\\">\\r\\n    <strong>[[%ticket_uploaded_files]]:<\\/strong>\\r\\n    [[+files]]\\r\\n<\\/ul>-->\\r\\n<!--tickets_can_star  active-->\\r\\n<!--tickets_stared <i class=\\"glyphicon glyphicon-star stared star\\"><\\/i>-->\\r\\n<!--tickets_unstared <i class=\\"glyphicon glyphicon-star unstared star\\"><\\/i>-->"}',
        'guid' => '921024b93d1f3b69148f5051d3e44d93',
        'native_key' => NULL,
        'signature' => 'b2369759c919d1861472b0474a6ef9a7',
      ),
      'b0f31f41289e02c509a2dad6662104d7' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.meta.file","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<li>\\r\\n    <a href=\\"[[+url]]\\" target=\\"_blank\\">[[+name]]<\\/a> [[+size]] kb\\r\\n<\\/li>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_meta_file.tpl","content":"<li>\\r\\n    <a href=\\"[[+url]]\\" target=\\"_blank\\">[[+name]]<\\/a> [[+size]] kb\\r\\n<\\/li>"}',
        'guid' => '0f1ebcd1f84a4fc39567f692940fc3c2',
        'native_key' => NULL,
        'signature' => '54426a39fb22faa9f664972c59bf13e8',
      ),
      '1da4c9801a6145c3db57318659294feb' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.author.subscribe","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[+modx.user.id:isloggedin:is=`1`:then=`\\r\\n<span class=\\"author-subscribe pull-right\\">\\r\\n    <label class=\\"checkbox\\">\\r\\n        <input type=\\"checkbox\\" name=\\"\\" id=\\"tickets-author-subscribe\\" value=\\"1\\" data-id=\\"[[+author_id]]\\"\\r\\n               [[+subscribed:notempty=`checked`]]\\/> [[%tickets_author_notify]]\\r\\n    <\\/label>\\r\\n<\\/span>\\r\\n`:else=``]]","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.ticket_author_subscribe.tpl","content":"[[+modx.user.id:isloggedin:is=`1`:then=`\\r\\n<span class=\\"author-subscribe pull-right\\">\\r\\n    <label class=\\"checkbox\\">\\r\\n        <input type=\\"checkbox\\" name=\\"\\" id=\\"tickets-author-subscribe\\" value=\\"1\\" data-id=\\"[[+author_id]]\\"\\r\\n               [[+subscribed:notempty=`checked`]]\\/> [[%tickets_author_notify]]\\r\\n    <\\/label>\\r\\n<\\/span>\\r\\n`:else=``]]"}',
        'guid' => '3908809e1e76c93d317e70da7f3a4c63',
        'native_key' => NULL,
        'signature' => 'c659f8f390cd2decf194038976c2b013',
      ),
      '1d1fd9121d6aba511ff42f4793e4f261' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"tpl.Tickets.author.email.subscription","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"[[%ticket_email_subscribed_author?\\r\\n&id=`[[+id]]`\\r\\n&fullname=`[[+user.fullname]]`\\r\\n&section=`[[+section.id]]`\\r\\n&section_title=`[[+section.pagetitle]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[%ticket_email_view]]<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/tickets\\/elements\\/chunks\\/chunk.author_email_subscription.tpl","content":"[[%ticket_email_subscribed_author?\\r\\n&id=`[[+id]]`\\r\\n&fullname=`[[+user.fullname]]`\\r\\n&section=`[[+section.id]]`\\r\\n&section_title=`[[+section.pagetitle]]`\\r\\n&pagetitle=`[[+pagetitle]]`\\r\\n]]\\r\\n\\r\\n<pre style=\\"background-color:#efefef;\\">[[+introtext]]<\\/pre>\\r\\n<br\\/><br\\/>\\r\\n\\r\\n<a href=\\"[[~[[+id]]?scheme=`full`]]\\">[[%ticket_email_view]]<\\/a>"}',
        'guid' => '3677002c9ba50f225fb1fd21f1f74a8e',
        'native_key' => NULL,
        'signature' => 'ae491bf7ffb3d93c23e6e706e231ed0e',
      ),
    ),
    'Snippets' => 
    array (
      'b3cd845014546c5a3fb4765641bd3801' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketForm","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\nif (!$Tickets->authenticated) {\\r\\n    return $modx->lexicon(\'ticket_err_no_auth\');\\r\\n}\\r\\n\\r\\n$tplSectionRow = $modx->getOption(\'tplSectionRow\', $scriptProperties, \'tpl.Tickets.sections.row\');\\r\\n$tplFormCreate = $modx->getOption(\'tplFormCreate\', $scriptProperties, \'tpl.Tickets.form.create\');\\r\\n$tplFormUpdate = $modx->getOption(\'tplFormUpdate\', $scriptProperties, \'tpl.Tickets.form.update\');\\r\\n$tplFiles = $modx->getOption(\'tplFiles\', $scriptProperties, \'tpl.Tickets.form.files\');\\r\\n$tplFile = $Tickets->config[\'tplFile\'] = $modx->getOption(\'tplFile\', $scriptProperties, \'tpl.Tickets.form.file\', true);\\r\\n$tplImage = $Tickets->config[\'tplImage\'] = $modx->getOption(\'tplImage\', $scriptProperties, \'tpl.Tickets.form.image\',\\r\\n    true);\\r\\n$allowDelete = $modx->getOption(\'allowDelete\', $scriptProperties);\\r\\nif (empty($source)) {\\r\\n    $source = $Tickets->config[\'source\'] = $modx->getOption(\'tickets.source_default\', null,\\r\\n        $modx->getOption(\'default_media_source\'));\\r\\n}\\r\\n$tid = !empty($_REQUEST[\'tid\'])\\r\\n    ? (int)$_REQUEST[\'tid\']\\r\\n    : (!empty($tid) ? (int)$tid : 0);\\r\\n$parent = !empty($_REQUEST[\'parent\'])\\r\\n    ? $_REQUEST[\'parent\']\\r\\n    : \'\';\\r\\n$data = array();\\r\\n\\r\\n\\/\\/ Update of ticket\\r\\nif (!empty($tid)) {\\r\\n    $tplWrapper = $tplFormUpdate;\\r\\n    \\/** @var Ticket $ticket *\\/\\r\\n    if ($ticket = $modx->getObject(\'Ticket\', array(\'class_key\' => \'Ticket\', \'id\' => $tid))) {\\r\\n        if ($ticket->get(\'createdby\') != $modx->user->id && !$modx->hasPermission(\'edit_document\')) {\\r\\n            return $modx->lexicon(\'ticket_err_wrong_user\');\\r\\n        }\\r\\n        $charset = $modx->getOption(\'modx_charset\');\\r\\n        $allowedFields = array_map(\'trim\', explode(\',\', $scriptProperties[\'allowedFields\']));\\r\\n        $allowedFields = array_unique(array_merge($allowedFields, array(\'parent\', \'pagetitle\', \'content\')));\\r\\n\\r\\n        $fields = array_keys($modx->getFieldMeta(\'Ticket\'));\\r\\n        foreach ($allowedFields as $field) {\\r\\n            $value = in_array($field, $fields)\\r\\n                ? $ticket->get($field)\\r\\n                : $ticket->getTVValue($field);\\r\\n            if (is_string($value)) {\\r\\n                $value = html_entity_decode($value, ENT_QUOTES, $charset);\\r\\n                $value = str_replace(\\r\\n                    array(\'[^\', \'^]\', \'[\', \']\', \'{\', \'}\'),\\r\\n                    array(\'&#91;^\', \'^&#93;\', \'*(*(*(*(*(*\', \'*)*)*)*)*)*\', \'~(~(~(~(~(~\', \'~)~)~)~)~)~\'),\\r\\n                    $value\\r\\n                );\\r\\n                $value = htmlentities($value, ENT_QUOTES, $charset);\\r\\n            }\\r\\n            $data[$field] = $value;\\r\\n        }\\r\\n        $data[\'id\'] = $ticket->id;\\r\\n        $data[\'published\'] = $ticket->published;\\r\\n        $data[\'deleted\'] = $ticket->deleted;\\r\\n        $data[\'allowDelete\'] = $allowDelete ? 1 : 0;\\r\\n        if (empty($parent)) {\\r\\n            $parent = $ticket->get(\'parent\');\\r\\n        }\\r\\n    } else {\\r\\n        return $modx->lexicon(\'ticket_err_id\', array(\'id\' => $tid));\\r\\n    }\\r\\n} else {\\r\\n    $tplWrapper = $tplFormCreate;\\r\\n}\\r\\n\\r\\n\\/\\/ Get available sections for ticket create\\r\\n$data[\'sections\'] = \'\';\\r\\n\\/** @var modProcessorResponse $response *\\/\\r\\n$response = $Tickets->runProcessor(\'web\\/section\\/getlist\', array(\\r\\n    \'parents\' => $scriptProperties[\'parents\'],\\r\\n    \'resources\' => $scriptProperties[\'resources\'],\\r\\n    \'sortby\' => !empty($scriptProperties[\'sortby\'])\\r\\n        ? $scriptProperties[\'sortby\']\\r\\n        : \'pagetitle\',\\r\\n    \'sortdir\' => !empty($scriptProperties[\'sortdir\'])\\r\\n        ? $scriptProperties[\'sortdir\']\\r\\n        : \'asc\',\\r\\n    \'depth\' => isset($scriptProperties[\'depth\'])\\r\\n        ? $scriptProperties[\'depth\']\\r\\n        : 0,\\r\\n    \'context\' => !empty($scriptProperties[\'context\'])\\r\\n        ? $scriptProperties[\'context\']\\r\\n        : $modx->context->key,\\r\\n    \'limit\' => 0,\\r\\n));\\r\\n$response = json_decode($response->getResponse(), true);\\r\\n\\r\\nif (!empty($response[\'results\'])) {\\r\\n    $Tickets->config[\'sections\'] = array();\\r\\n    foreach ($response[\'results\'] as $v) {\\r\\n        $v[\'selected\'] = $parent == $v[\'id\'] || $parent == $v[\'alias\']\\r\\n            ? \'selected\'\\r\\n            : \'\';\\r\\n        $data[\'sections\'] .= $Tickets->getChunk($tplSectionRow, $v);\\r\\n        $Tickets->config[\'sections\'][] = $v[\'id\'];\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($allowFiles)) {\\r\\n    $q = $modx->newQuery(\'TicketFile\');\\r\\n    $q->where(array(\'class\' => \'Ticket\'));\\r\\n    if (!empty($tid)) {\\r\\n        $q->andCondition(array(\'parent\' => $tid, \'createdby\' => $modx->user->id), null, 1);\\r\\n    } else {\\r\\n        $q->andCondition(array(\'parent\' => 0, \'createdby\' => $modx->user->id), null, 1);\\r\\n    }\\r\\n    $q->sortby(\'rank\', \'ASC\');\\r\\n    $q->sortby(\'createdon\', \'ASC\');\\r\\n    $collection = $modx->getIterator(\'TicketFile\', $q);\\r\\n    $files = \'\';\\r\\n    \\/** @var TicketFile $item *\\/\\r\\n    foreach ($collection as $item) {\\r\\n        if ($item->get(\'deleted\') && !$item->get(\'parent\')) {\\r\\n            $item->remove();\\r\\n        } else {\\r\\n            $item = $item->toArray();\\r\\n            $item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\r\\n            $item[\'new\'] = empty($item[\'parent\']);\\r\\n            $tpl = $item[\'type\'] == \'image\'\\r\\n                ? $tplImage\\r\\n                : $tplFile;\\r\\n            $files .= $Tickets->getChunk($tpl, $item);\\r\\n        }\\r\\n    }\\r\\n    $data[\'files\'] = $Tickets->getChunk($tplFiles, array(\\r\\n        \'files\' => $files,\\r\\n    ));\\r\\n    \\/** @var modMediaSource $source *\\/\\r\\n    if ($source = $modx->getObject(\'sources.modMediaSource\', array(\'id\' => $source))) {\\r\\n        $properties = $source->getPropertyList();\\r\\n        $config = array(\\r\\n            \'size\' => !empty($properties[\'maxUploadSize\'])\\r\\n                ? $properties[\'maxUploadSize\']\\r\\n                : 3145728,\\r\\n            \'height\' => !empty($properties[\'maxUploadHeight\'])\\r\\n                ? $properties[\'maxUploadHeight\']\\r\\n                : 1080,\\r\\n            \'width\' => !empty($properties[\'maxUploadWidth\'])\\r\\n                ? $properties[\'maxUploadWidth\']\\r\\n                : 1920,\\r\\n            \'extensions\' => !empty($properties[\'allowedFileTypes\'])\\r\\n                ? $properties[\'allowedFileTypes\']\\r\\n                : \'jpg,jpeg,png,gif\',\\r\\n        );\\r\\n        $modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.source=\' . json_encode($config) . \';<\\/script>\',\\r\\n            true);\\r\\n    }\\r\\n    $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/plupload.full.min.js\');\\r\\n    $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/files.js\');\\r\\n\\r\\n    $lang = $modx->getOption(\'cultureKey\');\\r\\n    if ($lang != \'en\' && file_exists($Tickets->config[\'jsPath\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\')) {\\r\\n        $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\');\\r\\n    }\\r\\n}\\r\\n\\r\\n$output = $Tickets->getChunk($tplWrapper, $data);\\r\\n$key = md5(json_encode($Tickets->config));\\r\\n$_SESSION[\'TicketForm\'][$key] = $Tickets->config;\\r\\n$output = str_ireplace(\'<\\/form>\',\\r\\n    \\"\\\\n<input type=\\\\\\"hidden\\\\\\" name=\\\\\\"form_key\\\\\\" value=\\\\\\"{$key}\\\\\\" class=\\\\\\"disable-sisyphus\\\\\\" \\/>\\\\n<\\/form>\\", $output);\\r\\n\\r\\nreturn $output;","locked":0,"properties":"a:20:{s:13:\\"tplFormCreate\\";a:7:{s:4:\\"name\\";s:13:\\"tplFormCreate\\";s:4:\\"desc\\";s:26:\\"tickets_prop_tplFormCreate\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:23:\\"tpl.Tickets.form.create\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tplFormUpdate\\";a:7:{s:4:\\"name\\";s:13:\\"tplFormUpdate\\";s:4:\\"desc\\";s:26:\\"tickets_prop_tplFormUpdate\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:23:\\"tpl.Tickets.form.update\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplPreview\\";a:7:{s:4:\\"name\\";s:10:\\"tplPreview\\";s:4:\\"desc\\";s:23:\\"tickets_prop_tplPreview\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.Tickets.form.preview\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"tplSectionRow\\";a:7:{s:4:\\"name\\";s:13:\\"tplSectionRow\\";s:4:\\"desc\\";s:26:\\"tickets_prop_tplSectionRow\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:69:\\"@INLINE <option value=\\"[[+id]]\\" [[+selected]]>[[+pagetitle]]<\\/option>\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplTicketEmailBcc\\";a:7:{s:4:\\"name\\";s:17:\\"tplTicketEmailBcc\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplTicketEmailBcc\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.ticket.email.bcc\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:26:\\"tplTicketEmailSubscription\\";a:7:{s:4:\\"name\\";s:26:\\"tplTicketEmailSubscription\\";s:4:\\"desc\\";s:39:\\"tickets_prop_tplTicketEmailSubscription\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:37:\\"tpl.Tickets.ticket.email.subscription\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"allowedFields\\";a:7:{s:4:\\"name\\";s:13:\\"allowedFields\\";s:4:\\"desc\\";s:26:\\"tickets_prop_allowedFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"parent,pagetitle,content\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"requiredFields\\";a:7:{s:4:\\"name\\";s:14:\\"requiredFields\\";s:4:\\"desc\\";s:27:\\"tickets_prop_requiredFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"parent,pagetitle,content\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"bypassFields\\";a:7:{s:4:\\"name\\";s:12:\\"bypassFields\\";s:4:\\"desc\\";s:25:\\"tickets_prop_bypassFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:19:\\"redirectUnpublished\\";a:7:{s:4:\\"name\\";s:19:\\"redirectUnpublished\\";s:4:\\"desc\\";s:32:\\"tickets_prop_redirectUnpublished\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:29:\\"tickets_prop_sections_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:31:\\"tickets_prop_sections_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:28:\\"tickets_prop_sections_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"pagetitle\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:29:\\"tickets_prop_sections_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:3:\\"ASC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"context\\";a:7:{s:4:\\"name\\";s:7:\\"context\\";s:4:\\"desc\\";s:29:\\"tickets_prop_sections_context\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"allowFiles\\";a:7:{s:4:\\"name\\";s:10:\\"allowFiles\\";s:4:\\"desc\\";s:23:\\"tickets_prop_allowFiles\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"source\\";a:7:{s:4:\\"name\\";s:6:\\"source\\";s:4:\\"desc\\";s:19:\\"tickets_prop_source\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplFiles\\";a:7:{s:4:\\"name\\";s:8:\\"tplFiles\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tplFiles\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:22:\\"tpl.Tickets.form.files\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplFile\\";a:7:{s:4:\\"name\\";s:7:\\"tplFile\\";s:4:\\"desc\\";s:20:\\"tickets_prop_tplFile\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:21:\\"tpl.Tickets.form.file\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplImage\\";a:7:{s:4:\\"name\\";s:8:\\"tplImage\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tplImage\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:22:\\"tpl.Tickets.form.image\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.ticket_form.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\nif (!$Tickets->authenticated) {\\r\\n    return $modx->lexicon(\'ticket_err_no_auth\');\\r\\n}\\r\\n\\r\\n$tplSectionRow = $modx->getOption(\'tplSectionRow\', $scriptProperties, \'tpl.Tickets.sections.row\');\\r\\n$tplFormCreate = $modx->getOption(\'tplFormCreate\', $scriptProperties, \'tpl.Tickets.form.create\');\\r\\n$tplFormUpdate = $modx->getOption(\'tplFormUpdate\', $scriptProperties, \'tpl.Tickets.form.update\');\\r\\n$tplFiles = $modx->getOption(\'tplFiles\', $scriptProperties, \'tpl.Tickets.form.files\');\\r\\n$tplFile = $Tickets->config[\'tplFile\'] = $modx->getOption(\'tplFile\', $scriptProperties, \'tpl.Tickets.form.file\', true);\\r\\n$tplImage = $Tickets->config[\'tplImage\'] = $modx->getOption(\'tplImage\', $scriptProperties, \'tpl.Tickets.form.image\',\\r\\n    true);\\r\\n$allowDelete = $modx->getOption(\'allowDelete\', $scriptProperties);\\r\\nif (empty($source)) {\\r\\n    $source = $Tickets->config[\'source\'] = $modx->getOption(\'tickets.source_default\', null,\\r\\n        $modx->getOption(\'default_media_source\'));\\r\\n}\\r\\n$tid = !empty($_REQUEST[\'tid\'])\\r\\n    ? (int)$_REQUEST[\'tid\']\\r\\n    : (!empty($tid) ? (int)$tid : 0);\\r\\n$parent = !empty($_REQUEST[\'parent\'])\\r\\n    ? $_REQUEST[\'parent\']\\r\\n    : \'\';\\r\\n$data = array();\\r\\n\\r\\n\\/\\/ Update of ticket\\r\\nif (!empty($tid)) {\\r\\n    $tplWrapper = $tplFormUpdate;\\r\\n    \\/** @var Ticket $ticket *\\/\\r\\n    if ($ticket = $modx->getObject(\'Ticket\', array(\'class_key\' => \'Ticket\', \'id\' => $tid))) {\\r\\n        if ($ticket->get(\'createdby\') != $modx->user->id && !$modx->hasPermission(\'edit_document\')) {\\r\\n            return $modx->lexicon(\'ticket_err_wrong_user\');\\r\\n        }\\r\\n        $charset = $modx->getOption(\'modx_charset\');\\r\\n        $allowedFields = array_map(\'trim\', explode(\',\', $scriptProperties[\'allowedFields\']));\\r\\n        $allowedFields = array_unique(array_merge($allowedFields, array(\'parent\', \'pagetitle\', \'content\')));\\r\\n\\r\\n        $fields = array_keys($modx->getFieldMeta(\'Ticket\'));\\r\\n        foreach ($allowedFields as $field) {\\r\\n            $value = in_array($field, $fields)\\r\\n                ? $ticket->get($field)\\r\\n                : $ticket->getTVValue($field);\\r\\n            if (is_string($value)) {\\r\\n                $value = html_entity_decode($value, ENT_QUOTES, $charset);\\r\\n                $value = str_replace(\\r\\n                    array(\'[^\', \'^]\', \'[\', \']\', \'{\', \'}\'),\\r\\n                    array(\'&#91;^\', \'^&#93;\', \'*(*(*(*(*(*\', \'*)*)*)*)*)*\', \'~(~(~(~(~(~\', \'~)~)~)~)~)~\'),\\r\\n                    $value\\r\\n                );\\r\\n                $value = htmlentities($value, ENT_QUOTES, $charset);\\r\\n            }\\r\\n            $data[$field] = $value;\\r\\n        }\\r\\n        $data[\'id\'] = $ticket->id;\\r\\n        $data[\'published\'] = $ticket->published;\\r\\n        $data[\'deleted\'] = $ticket->deleted;\\r\\n        $data[\'allowDelete\'] = $allowDelete ? 1 : 0;\\r\\n        if (empty($parent)) {\\r\\n            $parent = $ticket->get(\'parent\');\\r\\n        }\\r\\n    } else {\\r\\n        return $modx->lexicon(\'ticket_err_id\', array(\'id\' => $tid));\\r\\n    }\\r\\n} else {\\r\\n    $tplWrapper = $tplFormCreate;\\r\\n}\\r\\n\\r\\n\\/\\/ Get available sections for ticket create\\r\\n$data[\'sections\'] = \'\';\\r\\n\\/** @var modProcessorResponse $response *\\/\\r\\n$response = $Tickets->runProcessor(\'web\\/section\\/getlist\', array(\\r\\n    \'parents\' => $scriptProperties[\'parents\'],\\r\\n    \'resources\' => $scriptProperties[\'resources\'],\\r\\n    \'sortby\' => !empty($scriptProperties[\'sortby\'])\\r\\n        ? $scriptProperties[\'sortby\']\\r\\n        : \'pagetitle\',\\r\\n    \'sortdir\' => !empty($scriptProperties[\'sortdir\'])\\r\\n        ? $scriptProperties[\'sortdir\']\\r\\n        : \'asc\',\\r\\n    \'depth\' => isset($scriptProperties[\'depth\'])\\r\\n        ? $scriptProperties[\'depth\']\\r\\n        : 0,\\r\\n    \'context\' => !empty($scriptProperties[\'context\'])\\r\\n        ? $scriptProperties[\'context\']\\r\\n        : $modx->context->key,\\r\\n    \'limit\' => 0,\\r\\n));\\r\\n$response = json_decode($response->getResponse(), true);\\r\\n\\r\\nif (!empty($response[\'results\'])) {\\r\\n    $Tickets->config[\'sections\'] = array();\\r\\n    foreach ($response[\'results\'] as $v) {\\r\\n        $v[\'selected\'] = $parent == $v[\'id\'] || $parent == $v[\'alias\']\\r\\n            ? \'selected\'\\r\\n            : \'\';\\r\\n        $data[\'sections\'] .= $Tickets->getChunk($tplSectionRow, $v);\\r\\n        $Tickets->config[\'sections\'][] = $v[\'id\'];\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($allowFiles)) {\\r\\n    $q = $modx->newQuery(\'TicketFile\');\\r\\n    $q->where(array(\'class\' => \'Ticket\'));\\r\\n    if (!empty($tid)) {\\r\\n        $q->andCondition(array(\'parent\' => $tid, \'createdby\' => $modx->user->id), null, 1);\\r\\n    } else {\\r\\n        $q->andCondition(array(\'parent\' => 0, \'createdby\' => $modx->user->id), null, 1);\\r\\n    }\\r\\n    $q->sortby(\'rank\', \'ASC\');\\r\\n    $q->sortby(\'createdon\', \'ASC\');\\r\\n    $collection = $modx->getIterator(\'TicketFile\', $q);\\r\\n    $files = \'\';\\r\\n    \\/** @var TicketFile $item *\\/\\r\\n    foreach ($collection as $item) {\\r\\n        if ($item->get(\'deleted\') && !$item->get(\'parent\')) {\\r\\n            $item->remove();\\r\\n        } else {\\r\\n            $item = $item->toArray();\\r\\n            $item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\r\\n            $item[\'new\'] = empty($item[\'parent\']);\\r\\n            $tpl = $item[\'type\'] == \'image\'\\r\\n                ? $tplImage\\r\\n                : $tplFile;\\r\\n            $files .= $Tickets->getChunk($tpl, $item);\\r\\n        }\\r\\n    }\\r\\n    $data[\'files\'] = $Tickets->getChunk($tplFiles, array(\\r\\n        \'files\' => $files,\\r\\n    ));\\r\\n    \\/** @var modMediaSource $source *\\/\\r\\n    if ($source = $modx->getObject(\'sources.modMediaSource\', array(\'id\' => $source))) {\\r\\n        $properties = $source->getPropertyList();\\r\\n        $config = array(\\r\\n            \'size\' => !empty($properties[\'maxUploadSize\'])\\r\\n                ? $properties[\'maxUploadSize\']\\r\\n                : 3145728,\\r\\n            \'height\' => !empty($properties[\'maxUploadHeight\'])\\r\\n                ? $properties[\'maxUploadHeight\']\\r\\n                : 1080,\\r\\n            \'width\' => !empty($properties[\'maxUploadWidth\'])\\r\\n                ? $properties[\'maxUploadWidth\']\\r\\n                : 1920,\\r\\n            \'extensions\' => !empty($properties[\'allowedFileTypes\'])\\r\\n                ? $properties[\'allowedFileTypes\']\\r\\n                : \'jpg,jpeg,png,gif\',\\r\\n        );\\r\\n        $modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.source=\' . json_encode($config) . \';<\\/script>\',\\r\\n            true);\\r\\n    }\\r\\n    $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/plupload.full.min.js\');\\r\\n    $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/files.js\');\\r\\n\\r\\n    $lang = $modx->getOption(\'cultureKey\');\\r\\n    if ($lang != \'en\' && file_exists($Tickets->config[\'jsPath\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\')) {\\r\\n        $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\');\\r\\n    }\\r\\n}\\r\\n\\r\\n$output = $Tickets->getChunk($tplWrapper, $data);\\r\\n$key = md5(json_encode($Tickets->config));\\r\\n$_SESSION[\'TicketForm\'][$key] = $Tickets->config;\\r\\n$output = str_ireplace(\'<\\/form>\',\\r\\n    \\"\\\\n<input type=\\\\\\"hidden\\\\\\" name=\\\\\\"form_key\\\\\\" value=\\\\\\"{$key}\\\\\\" class=\\\\\\"disable-sisyphus\\\\\\" \\/>\\\\n<\\/form>\\", $output);\\r\\n\\r\\nreturn $output;"}',
        'guid' => 'db1b2fc2b66e319059027646ad62ca32',
        'native_key' => NULL,
        'signature' => 'fe32bc7ecd2661c1720d0e6139bed919',
      ),
      'ee18ae1a54a8429546760c161647a4c7' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketComments","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\nif (empty($thread)) {\\r\\n    $scriptProperties[\'thread\'] = $modx->getOption(\'thread\', $scriptProperties, \'resource-\' . $modx->resource->id,\\r\\n        true);\\r\\n}\\r\\n$scriptProperties[\'resource\'] = $modx->resource->get(\'id\');\\r\\n$scriptProperties[\'snippetPrepareComment\'] = $modx->getOption(\'tickets.snippet_prepare_comment\');\\r\\n$scriptProperties[\'commentEditTime\'] = $modx->getOption(\'tickets.comment_edit_time\', null, 180);\\r\\n\\r\\n$depth = $modx->getOption(\'depth\', $scriptProperties, 0);\\r\\n$tplComments = $modx->getOption(\'tplComments\', $scriptProperties, \'tpl.Tickets.comment.wrapper\');\\r\\n$tplCommentForm = $modx->getOption(\'tplCommentForm\', $scriptProperties, \'tpl.Tickets.comment.form\');\\r\\n$tplCommentFormGuest = $modx->getOption(\'tplCommentFormGuest\', $scriptProperties, \'tpl.Tickets.comment.form.guest\');\\r\\n$tplCommentAuth = $modx->getOption(\'tplCommentAuth\', $scriptProperties, \'tpl.Tickets.comment.one.auth\');\\r\\n$tplCommentGuest = $modx->getOption(\'tplCommentGuest\', $scriptProperties, \'tpl.Tickets.comment.one.guest\');\\r\\n$tplLoginToComment = $modx->getOption(\'tplLoginToComment\', $scriptProperties, \'tpl.Tickets.comment.login\');\\r\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\r\\n\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n$tplFiles = $Tickets->config[\'tplFiles\'] = $modx->getOption(\'tplFiles\', $scriptProperties, \'tpl.Tickets.comment.form.files\');\\r\\n$tplFile = $Tickets->config[\'tplFile\'] = $modx->getOption(\'tplFile\', $scriptProperties, \'tpl.Tickets.form.file\', true);\\r\\n$tplImage = $Tickets->config[\'tplImage\'] = $modx->getOption(\'tplImage\', $scriptProperties, \'tpl.Tickets.form.image\',\\r\\n    true);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n\\/\\/ Prepare Ticket Thread\\r\\n\\/** @var TicketThread $thread *\\/\\r\\nif (!$thread = $modx->getObject(\'TicketThread\', array(\'name\' => $scriptProperties[\'thread\']))) {\\r\\n    $thread = $modx->newObject(\'TicketThread\');\\r\\n    $thread->fromArray(array(\\r\\n        \'name\' => $scriptProperties[\'thread\'],\\r\\n        \'resource\' => $modx->resource->get(\'id\'),\\r\\n        \'createdby\' => $modx->user->id,\\r\\n        \'createdon\' => date(\'Y-m-d H:i:s\'),\\r\\n        \'subscribers\' => array($modx->resource->get(\'createdby\')),\\r\\n    ));\\r\\n} elseif ($thread->get(\'deleted\')) {\\r\\n    return $modx->lexicon(\'ticket_thread_err_deleted\');\\r\\n}\\r\\n\\/\\/ Prepare session for guests\\r\\nif (!empty($allowGuest) && !isset($_SESSION[\'TicketComments\'])) {\\r\\n    $_SESSION[\'TicketComments\'] = array(\'name\' => \'\', \'email\' => \'\', \'ids\' => array());\\r\\n}\\r\\n\\r\\n\\/\\/ Migrate authors to subscription system\\r\\nif (!is_array($thread->get(\'subscribers\'))) {\\r\\n    $thread->set(\'subscribers\', array($modx->resource->get(\'createdby\')));\\r\\n}\\r\\n$thread->set(\'resource\', $modx->resource->get(\'id\'));\\r\\n$thread->set(\'properties\', $scriptProperties);\\r\\n$thread->save();\\r\\n\\r\\n$ratings = array();\\r\\n\\/** @var Ticket $ticket *\\/\\r\\nif ($ticket = $thread->getOne(\'Ticket\')) {\\r\\n    \\/** @var TicketsSection $section *\\/\\r\\n    if ($section = $ticket->getOne(\'Section\')) {\\r\\n        $ratings = $section->getProperties(\'ratings\');\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Prepare query to db\\r\\n$class = \'TicketComment\';\\r\\n$where = array();\\r\\nif (empty($showUnpublished)) {\\r\\n    $where[\'published\'] = 1;\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$innerJoin = array(\\r\\n    \'Thread\' => array(\\r\\n        \'class\' => \'TicketThread\',\\r\\n        \'on\' => \'`Thread`.`id` = `TicketComment`.`thread` AND `Thread`.`name` = \\"\' . $thread->get(\'name\') . \'\\"\',\\r\\n    ),\\r\\n);\\r\\n$leftJoin = array(\\r\\n    \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\r\\n    \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $leftJoin[\'Vote\'] = array(\\r\\n        \'class\' => \'TicketVote\',\\r\\n        \'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Star\'] = array(\\r\\n        \'class\' => \'TicketStar\',\\r\\n        \'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n}\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true) .\\r\\n        \', `parent` as `new_parent`\',\\r\\n    \'Thread\' => \'`Thread`.`resource`\',\\r\\n    \'User\' => \'`User`.`username`\',\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'),\\r\\n            true) . \',`Profile`.`email` as `user_email`\',\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\r\\n    $select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\r\\n}\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'innerJoin\' => json_encode($innerJoin),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => $class . \'.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'limit\' => 0,\\r\\n    \'fastMode\' => true,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = $commentsThread = null;\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    $tmp = array();\\r\\n    $i = 1;\\r\\n    foreach ($rows as $row) {\\r\\n        $row[\'ratings\'] = $ratings;\\r\\n        $row[\'idx\'] = $i++;\\r\\n        $tmp[$row[\'id\']] = $row;\\r\\n    }\\r\\n    $rows = $thread->buildTree($tmp, $depth);\\r\\n    unset($tmp, $i);\\r\\n\\r\\n    if (!empty($formBefore)) {\\r\\n        $rows = array_reverse($rows);\\r\\n    }\\r\\n\\r\\n    $tpl = !$thread->get(\'closed\') && ($Tickets->authenticated || !empty($allowGuest))\\r\\n        ? $tplCommentAuth\\r\\n        : $tplCommentGuest;\\r\\n    foreach ($rows as $row) {\\r\\n        $output[] = $Tickets->templateNode($row, $tpl);\\r\\n    }\\r\\n\\r\\n    $pdoFetch->addTime(\'Returning processed chunks\');\\r\\n    $output = implode($outputSeparator, $output);\\r\\n}\\r\\n\\r\\n$commentsThread = $pdoFetch->getChunk($tplComments, array(\\r\\n    \'total\' => $modx->getPlaceholder($pdoFetch->config[\'totalVar\']),\\r\\n    \'comments\' => $output,\\r\\n    \'subscribed\' => $thread->isSubscribed(),\\r\\n));\\r\\n\\r\\n$pls = array(\'thread\' => $scriptProperties[\'thread\']);\\r\\n\\r\\nif (!empty($allowFiles)) {\\r\\n    if ($Tickets->authenticated) {\\r\\n        if (empty($source)) {\\r\\n            $source = $Tickets->config[\'source\'] = $modx->getOption(\'tickets.source_default\', null,\\r\\n                $modx->getOption(\'default_media_source\'));\\r\\n        }\\r\\n\\r\\n        $pls[\'files\'] = $Tickets->getFileComment();\\r\\n\\r\\n        \\/** @var modMediaSource $source *\\/\\r\\n        if ($source = $modx->getObject(\'sources.modMediaSource\', array(\'id\' => $source))) {\\r\\n            $properties = $source->getPropertyList();\\r\\n            $config = array(\\r\\n                \'size\' => !empty($properties[\'maxUploadSize\'])\\r\\n                    ? $properties[\'maxUploadSize\']\\r\\n                    : 3145728,\\r\\n                \'height\' => !empty($properties[\'maxUploadHeight\'])\\r\\n                    ? $properties[\'maxUploadHeight\']\\r\\n                    : 1080,\\r\\n                \'width\' => !empty($properties[\'maxUploadWidth\'])\\r\\n                    ? $properties[\'maxUploadWidth\']\\r\\n                    : 1920,\\r\\n                \'extensions\' => !empty($properties[\'allowedFileTypes\'])\\r\\n                    ? $properties[\'allowedFileTypes\']\\r\\n                    : \'jpg,jpeg,png,gif\',\\r\\n            );\\r\\n            $modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.source=\' . json_encode($config) . \';<\\/script>\',\\r\\n                true);\\r\\n        }\\r\\n        $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/plupload.full.min.js\');\\r\\n        $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/files.js\');\\r\\n\\r\\n        $lang = $modx->getOption(\'cultureKey\');\\r\\n        if ($lang != \'en\' && file_exists($Tickets->config[\'jsPath\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\')) {\\r\\n            $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\');\\r\\n        }\\r\\n    }\\r\\n    else {\\r\\n        $pls[\'allowFiles\'] = 1;\\r\\n    }\\r\\n}\\r\\n\\r\\n$key = md5(json_encode($Tickets->config));\\r\\n$_SESSION[\'TicketForm\'][$key] = $Tickets->config;\\r\\n$pls[\'formkey\'] = $key;\\r\\n\\r\\nif (!$Tickets->authenticated && empty($allowGuest)) {\\r\\n    $form = $pdoFetch->getChunk($tplLoginToComment);\\r\\n} elseif (!$Tickets->authenticated) {\\r\\n    $pls[\'name\'] = $_SESSION[\'TicketComments\'][\'name\'];\\r\\n    $pls[\'email\'] = $_SESSION[\'TicketComments\'][\'email\'];\\r\\n    if (!empty($enableCaptcha)) {\\r\\n        $tmp = $Tickets->getCaptcha();\\r\\n        $pls[\'captcha\'] = $modx->lexicon(\'ticket_comment_captcha\', $tmp);\\r\\n    }\\r\\n    $form = $pdoFetch->getChunk($tplCommentFormGuest, $pls);\\r\\n} else {\\r\\n    $form = $pdoFetch->getChunk($tplCommentForm, $pls);\\r\\n}\\r\\n\\r\\n$commentForm = $thread->get(\'closed\')\\r\\n    ? $modx->lexicon(\'ticket_thread_err_closed\')\\r\\n    : $form;\\r\\n$output = !empty($formBefore)\\r\\n    ? $commentForm . $commentsThread\\r\\n    : $commentsThread . $commentForm;\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"CommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.formBefore = \' . (int)!empty($formBefore) . \';TicketsConfig.thread_depth = \' . (int)$depth . \';<\\/script>\',\\r\\n    true);\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    if (!empty($separatePlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder.\'_form\', $commentForm);\\r\\n        $modx->setPlaceholder($toPlaceholder.\'_thread\', $commentsThread);\\r\\n    }\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:29:{s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:19:\\"tickets_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"gravatarIcon\\";a:7:{s:4:\\"name\\";s:12:\\"gravatarIcon\\";s:4:\\"desc\\";s:25:\\"tickets_prop_gravatarIcon\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"mm\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"gravatarSize\\";a:7:{s:4:\\"name\\";s:12:\\"gravatarSize\\";s:4:\\"desc\\";s:25:\\"tickets_prop_gravatarSize\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:2:\\"24\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"gravatarUrl\\";a:7:{s:4:\\"name\\";s:11:\\"gravatarUrl\\";s:4:\\"desc\\";s:24:\\"tickets_prop_gravatarUrl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:32:\\"https:\\/\\/www.gravatar.com\\/avatar\\/\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"tplCommentForm\\";a:7:{s:4:\\"name\\";s:14:\\"tplCommentForm\\";s:4:\\"desc\\";s:27:\\"tickets_prop_tplCommentForm\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.Tickets.comment.form\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:19:\\"tplCommentFormGuest\\";a:7:{s:4:\\"name\\";s:19:\\"tplCommentFormGuest\\";s:4:\\"desc\\";s:32:\\"tickets_prop_tplCommentFormGuest\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:30:\\"tpl.Tickets.comment.form.guest\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"tplCommentAuth\\";a:7:{s:4:\\"name\\";s:14:\\"tplCommentAuth\\";s:4:\\"desc\\";s:27:\\"tickets_prop_tplCommentAuth\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.comment.one.auth\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"tplCommentGuest\\";a:7:{s:4:\\"name\\";s:15:\\"tplCommentGuest\\";s:4:\\"desc\\";s:28:\\"tickets_prop_tplCommentGuest\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:29:\\"tpl.Tickets.comment.one.guest\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplCommentDeleted\\";a:7:{s:4:\\"name\\";s:17:\\"tplCommentDeleted\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplCommentDeleted\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.one.deleted\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"tplComments\\";a:7:{s:4:\\"name\\";s:11:\\"tplComments\\";s:4:\\"desc\\";s:24:\\"tickets_prop_tplComments\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:27:\\"tpl.Tickets.comment.wrapper\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplLoginToComment\\";a:7:{s:4:\\"name\\";s:17:\\"tplLoginToComment\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplLoginToComment\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:25:\\"tpl.Tickets.comment.login\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:20:\\"tplCommentEmailOwner\\";a:7:{s:4:\\"name\\";s:20:\\"tplCommentEmailOwner\\";s:4:\\"desc\\";s:33:\\"tickets_prop_tplCommentEmailOwner\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.email.owner\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:20:\\"tplCommentEmailReply\\";a:7:{s:4:\\"name\\";s:20:\\"tplCommentEmailReply\\";s:4:\\"desc\\";s:33:\\"tickets_prop_tplCommentEmailReply\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.email.reply\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:27:\\"tplCommentEmailSubscription\\";a:7:{s:4:\\"name\\";s:27:\\"tplCommentEmailSubscription\\";s:4:\\"desc\\";s:40:\\"tickets_prop_tplCommentEmailSubscription\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:38:\\"tpl.Tickets.comment.email.subscription\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"tplCommentEmailBcc\\";a:7:{s:4:\\"name\\";s:18:\\"tplCommentEmailBcc\\";s:4:\\"desc\\";s:31:\\"tickets_prop_tplCommentEmailBcc\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:29:\\"tpl.Tickets.comment.email.bcc\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:26:\\"tplCommentEmailUnpublished\\";a:7:{s:4:\\"name\\";s:26:\\"tplCommentEmailUnpublished\\";s:4:\\"desc\\";s:39:\\"tickets_prop_tplCommentEmailUnpublished\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:37:\\"tpl.Tickets.comment.email.unpublished\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"autoPublish\\";a:7:{s:4:\\"name\\";s:11:\\"autoPublish\\";s:4:\\"desc\\";s:24:\\"tickets_prop_autoPublish\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"autoPublishGuest\\";a:7:{s:4:\\"name\\";s:16:\\"autoPublishGuest\\";s:4:\\"desc\\";s:29:\\"tickets_prop_autoPublishGuest\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"formBefore\\";a:7:{s:4:\\"name\\";s:10:\\"formBefore\\";s:4:\\"desc\\";s:23:\\"tickets_prop_formBefore\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:26:\\"tickets_prop_commentsDepth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"allowGuest\\";a:7:{s:4:\\"name\\";s:10:\\"allowGuest\\";s:4:\\"desc\\";s:23:\\"tickets_prop_allowGuest\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"allowGuestEdit\\";a:7:{s:4:\\"name\\";s:14:\\"allowGuestEdit\\";s:4:\\"desc\\";s:27:\\"tickets_prop_allowGuestEdit\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"allowGuestEmails\\";a:7:{s:4:\\"name\\";s:16:\\"allowGuestEmails\\";s:4:\\"desc\\";s:29:\\"tickets_prop_allowGuestEmails\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"enableCaptcha\\";a:7:{s:4:\\"name\\";s:13:\\"enableCaptcha\\";s:4:\\"desc\\";s:26:\\"tickets_prop_enableCaptcha\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"minCaptcha\\";a:7:{s:4:\\"name\\";s:10:\\"minCaptcha\\";s:4:\\"desc\\";s:23:\\"tickets_prop_minCaptcha\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"maxCaptcha\\";a:7:{s:4:\\"name\\";s:10:\\"maxCaptcha\\";s:4:\\"desc\\";s:23:\\"tickets_prop_maxCaptcha\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"requiredFields\\";a:7:{s:4:\\"name\\";s:14:\\"requiredFields\\";s:4:\\"desc\\";s:27:\\"tickets_prop_requiredFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"name,email\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"threadUrl\\";a:7:{s:4:\\"name\\";s:9:\\"threadUrl\\";s:4:\\"desc\\";s:22:\\"tickets_prop_threadUrl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.comments.php","content":"\\/** @var array $scriptProperties *\\/\\r\\nif (empty($thread)) {\\r\\n    $scriptProperties[\'thread\'] = $modx->getOption(\'thread\', $scriptProperties, \'resource-\' . $modx->resource->id,\\r\\n        true);\\r\\n}\\r\\n$scriptProperties[\'resource\'] = $modx->resource->get(\'id\');\\r\\n$scriptProperties[\'snippetPrepareComment\'] = $modx->getOption(\'tickets.snippet_prepare_comment\');\\r\\n$scriptProperties[\'commentEditTime\'] = $modx->getOption(\'tickets.comment_edit_time\', null, 180);\\r\\n\\r\\n$depth = $modx->getOption(\'depth\', $scriptProperties, 0);\\r\\n$tplComments = $modx->getOption(\'tplComments\', $scriptProperties, \'tpl.Tickets.comment.wrapper\');\\r\\n$tplCommentForm = $modx->getOption(\'tplCommentForm\', $scriptProperties, \'tpl.Tickets.comment.form\');\\r\\n$tplCommentFormGuest = $modx->getOption(\'tplCommentFormGuest\', $scriptProperties, \'tpl.Tickets.comment.form.guest\');\\r\\n$tplCommentAuth = $modx->getOption(\'tplCommentAuth\', $scriptProperties, \'tpl.Tickets.comment.one.auth\');\\r\\n$tplCommentGuest = $modx->getOption(\'tplCommentGuest\', $scriptProperties, \'tpl.Tickets.comment.one.guest\');\\r\\n$tplLoginToComment = $modx->getOption(\'tplLoginToComment\', $scriptProperties, \'tpl.Tickets.comment.login\');\\r\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\r\\n\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n$tplFiles = $Tickets->config[\'tplFiles\'] = $modx->getOption(\'tplFiles\', $scriptProperties, \'tpl.Tickets.comment.form.files\');\\r\\n$tplFile = $Tickets->config[\'tplFile\'] = $modx->getOption(\'tplFile\', $scriptProperties, \'tpl.Tickets.form.file\', true);\\r\\n$tplImage = $Tickets->config[\'tplImage\'] = $modx->getOption(\'tplImage\', $scriptProperties, \'tpl.Tickets.form.image\',\\r\\n    true);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n\\/\\/ Prepare Ticket Thread\\r\\n\\/** @var TicketThread $thread *\\/\\r\\nif (!$thread = $modx->getObject(\'TicketThread\', array(\'name\' => $scriptProperties[\'thread\']))) {\\r\\n    $thread = $modx->newObject(\'TicketThread\');\\r\\n    $thread->fromArray(array(\\r\\n        \'name\' => $scriptProperties[\'thread\'],\\r\\n        \'resource\' => $modx->resource->get(\'id\'),\\r\\n        \'createdby\' => $modx->user->id,\\r\\n        \'createdon\' => date(\'Y-m-d H:i:s\'),\\r\\n        \'subscribers\' => array($modx->resource->get(\'createdby\')),\\r\\n    ));\\r\\n} elseif ($thread->get(\'deleted\')) {\\r\\n    return $modx->lexicon(\'ticket_thread_err_deleted\');\\r\\n}\\r\\n\\/\\/ Prepare session for guests\\r\\nif (!empty($allowGuest) && !isset($_SESSION[\'TicketComments\'])) {\\r\\n    $_SESSION[\'TicketComments\'] = array(\'name\' => \'\', \'email\' => \'\', \'ids\' => array());\\r\\n}\\r\\n\\r\\n\\/\\/ Migrate authors to subscription system\\r\\nif (!is_array($thread->get(\'subscribers\'))) {\\r\\n    $thread->set(\'subscribers\', array($modx->resource->get(\'createdby\')));\\r\\n}\\r\\n$thread->set(\'resource\', $modx->resource->get(\'id\'));\\r\\n$thread->set(\'properties\', $scriptProperties);\\r\\n$thread->save();\\r\\n\\r\\n$ratings = array();\\r\\n\\/** @var Ticket $ticket *\\/\\r\\nif ($ticket = $thread->getOne(\'Ticket\')) {\\r\\n    \\/** @var TicketsSection $section *\\/\\r\\n    if ($section = $ticket->getOne(\'Section\')) {\\r\\n        $ratings = $section->getProperties(\'ratings\');\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Prepare query to db\\r\\n$class = \'TicketComment\';\\r\\n$where = array();\\r\\nif (empty($showUnpublished)) {\\r\\n    $where[\'published\'] = 1;\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$innerJoin = array(\\r\\n    \'Thread\' => array(\\r\\n        \'class\' => \'TicketThread\',\\r\\n        \'on\' => \'`Thread`.`id` = `TicketComment`.`thread` AND `Thread`.`name` = \\"\' . $thread->get(\'name\') . \'\\"\',\\r\\n    ),\\r\\n);\\r\\n$leftJoin = array(\\r\\n    \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\r\\n    \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $leftJoin[\'Vote\'] = array(\\r\\n        \'class\' => \'TicketVote\',\\r\\n        \'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Star\'] = array(\\r\\n        \'class\' => \'TicketStar\',\\r\\n        \'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n}\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true) .\\r\\n        \', `parent` as `new_parent`\',\\r\\n    \'Thread\' => \'`Thread`.`resource`\',\\r\\n    \'User\' => \'`User`.`username`\',\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'),\\r\\n            true) . \',`Profile`.`email` as `user_email`\',\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\r\\n    $select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\r\\n}\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'innerJoin\' => json_encode($innerJoin),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => $class . \'.id\',\\r\\n    \'sortdir\' => \'ASC\',\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'limit\' => 0,\\r\\n    \'fastMode\' => true,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = $commentsThread = null;\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    $tmp = array();\\r\\n    $i = 1;\\r\\n    foreach ($rows as $row) {\\r\\n        $row[\'ratings\'] = $ratings;\\r\\n        $row[\'idx\'] = $i++;\\r\\n        $tmp[$row[\'id\']] = $row;\\r\\n    }\\r\\n    $rows = $thread->buildTree($tmp, $depth);\\r\\n    unset($tmp, $i);\\r\\n\\r\\n    if (!empty($formBefore)) {\\r\\n        $rows = array_reverse($rows);\\r\\n    }\\r\\n\\r\\n    $tpl = !$thread->get(\'closed\') && ($Tickets->authenticated || !empty($allowGuest))\\r\\n        ? $tplCommentAuth\\r\\n        : $tplCommentGuest;\\r\\n    foreach ($rows as $row) {\\r\\n        $output[] = $Tickets->templateNode($row, $tpl);\\r\\n    }\\r\\n\\r\\n    $pdoFetch->addTime(\'Returning processed chunks\');\\r\\n    $output = implode($outputSeparator, $output);\\r\\n}\\r\\n\\r\\n$commentsThread = $pdoFetch->getChunk($tplComments, array(\\r\\n    \'total\' => $modx->getPlaceholder($pdoFetch->config[\'totalVar\']),\\r\\n    \'comments\' => $output,\\r\\n    \'subscribed\' => $thread->isSubscribed(),\\r\\n));\\r\\n\\r\\n$pls = array(\'thread\' => $scriptProperties[\'thread\']);\\r\\n\\r\\nif (!empty($allowFiles)) {\\r\\n    if ($Tickets->authenticated) {\\r\\n        if (empty($source)) {\\r\\n            $source = $Tickets->config[\'source\'] = $modx->getOption(\'tickets.source_default\', null,\\r\\n                $modx->getOption(\'default_media_source\'));\\r\\n        }\\r\\n\\r\\n        $pls[\'files\'] = $Tickets->getFileComment();\\r\\n\\r\\n        \\/** @var modMediaSource $source *\\/\\r\\n        if ($source = $modx->getObject(\'sources.modMediaSource\', array(\'id\' => $source))) {\\r\\n            $properties = $source->getPropertyList();\\r\\n            $config = array(\\r\\n                \'size\' => !empty($properties[\'maxUploadSize\'])\\r\\n                    ? $properties[\'maxUploadSize\']\\r\\n                    : 3145728,\\r\\n                \'height\' => !empty($properties[\'maxUploadHeight\'])\\r\\n                    ? $properties[\'maxUploadHeight\']\\r\\n                    : 1080,\\r\\n                \'width\' => !empty($properties[\'maxUploadWidth\'])\\r\\n                    ? $properties[\'maxUploadWidth\']\\r\\n                    : 1920,\\r\\n                \'extensions\' => !empty($properties[\'allowedFileTypes\'])\\r\\n                    ? $properties[\'allowedFileTypes\']\\r\\n                    : \'jpg,jpeg,png,gif\',\\r\\n            );\\r\\n            $modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.source=\' . json_encode($config) . \';<\\/script>\',\\r\\n                true);\\r\\n        }\\r\\n        $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/plupload.full.min.js\');\\r\\n        $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/files.js\');\\r\\n\\r\\n        $lang = $modx->getOption(\'cultureKey\');\\r\\n        if ($lang != \'en\' && file_exists($Tickets->config[\'jsPath\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\')) {\\r\\n            $modx->regClientScript($Tickets->config[\'jsUrl\'] . \'web\\/lib\\/plupload\\/i18n\\/\' . $lang . \'.js\');\\r\\n        }\\r\\n    }\\r\\n    else {\\r\\n        $pls[\'allowFiles\'] = 1;\\r\\n    }\\r\\n}\\r\\n\\r\\n$key = md5(json_encode($Tickets->config));\\r\\n$_SESSION[\'TicketForm\'][$key] = $Tickets->config;\\r\\n$pls[\'formkey\'] = $key;\\r\\n\\r\\nif (!$Tickets->authenticated && empty($allowGuest)) {\\r\\n    $form = $pdoFetch->getChunk($tplLoginToComment);\\r\\n} elseif (!$Tickets->authenticated) {\\r\\n    $pls[\'name\'] = $_SESSION[\'TicketComments\'][\'name\'];\\r\\n    $pls[\'email\'] = $_SESSION[\'TicketComments\'][\'email\'];\\r\\n    if (!empty($enableCaptcha)) {\\r\\n        $tmp = $Tickets->getCaptcha();\\r\\n        $pls[\'captcha\'] = $modx->lexicon(\'ticket_comment_captcha\', $tmp);\\r\\n    }\\r\\n    $form = $pdoFetch->getChunk($tplCommentFormGuest, $pls);\\r\\n} else {\\r\\n    $form = $pdoFetch->getChunk($tplCommentForm, $pls);\\r\\n}\\r\\n\\r\\n$commentForm = $thread->get(\'closed\')\\r\\n    ? $modx->lexicon(\'ticket_thread_err_closed\')\\r\\n    : $form;\\r\\n$output = !empty($formBefore)\\r\\n    ? $commentForm . $commentsThread\\r\\n    : $commentsThread . $commentForm;\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"CommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n$modx->regClientStartupScript(\'<script type=\\"text\\/javascript\\">TicketsConfig.formBefore = \' . (int)!empty($formBefore) . \';TicketsConfig.thread_depth = \' . (int)$depth . \';<\\/script>\',\\r\\n    true);\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    if (!empty($separatePlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder.\'_form\', $commentForm);\\r\\n        $modx->setPlaceholder($toPlaceholder.\'_thread\', $commentsThread);\\r\\n    }\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '14b513a44145548eee3a1464a45b7baa',
        'native_key' => NULL,
        'signature' => '2d8d56085429dc809f23a979dc8a1087',
      ),
      'c288951e44865782d193f391104049cb' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketLatest","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\nif (!empty($cacheKey) && $output = $modx->cacheManager->get(\'tickets\\/latest.\' . $cacheKey)) {\\r\\n    return $output;\\r\\n}\\r\\n\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (empty($action)) {\\r\\n    $action = \'comments\';\\r\\n}\\r\\nif ($action == \'tickets\' && $scriptProperties[\'tpl\'] == \'tpl.Tickets.comment.latest\') {\\r\\n    $scriptProperties[\'tpl\'] = \'tpl.Tickets.ticket.latest\';\\r\\n}\\r\\n$action = strtolower($action);\\r\\n$where = $action == \'tickets\'\\r\\n    ? array(\'class_key\' => \'Ticket\')\\r\\n    : array();\\r\\n\\r\\nif (empty($showUnpublished)) {\\r\\n    $where[\'Ticket.published\'] = 1;\\r\\n}\\r\\nif (empty($showHidden)) {\\r\\n    $where[\'Ticket.hidemenu\'] = 0;\\r\\n}\\r\\nif (empty($showDeleted)) {\\r\\n    $where[\'Ticket.deleted\'] = 0;\\r\\n}\\r\\nif (!isset($cacheTime)) {\\r\\n    $cacheTime = 1800;\\r\\n}\\r\\nif (!empty($user)) {\\r\\n    $user = array_map(\'trim\', explode(\',\', $user));\\r\\n    $user_id = $user_username = array();\\r\\n    foreach ($user as $v) {\\r\\n        if (is_numeric($v)) {\\r\\n            $user_id[] = $v;\\r\\n        } else {\\r\\n            $user_username[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($user_id) && !empty($user_username)) {\\r\\n        $where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\',\\r\\n                $user_username) . \'\\\\\'))\';\\r\\n    } else {\\r\\n        if (!empty($user_id)) {\\r\\n            $where[\'User.id:IN\'] = $user_id;\\r\\n        } else {\\r\\n            if (!empty($user_username)) {\\r\\n                $where[\'User.username:IN\'] = $user_username;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Filter by ids\\r\\nif (!empty($resources)) {\\r\\n    $resources = array_map(\'trim\', explode(\',\', $resources));\\r\\n    $in = $out = array();\\r\\n    foreach ($resources as $v) {\\r\\n        if (!is_numeric($v)) {\\r\\n            continue;\\r\\n        }\\r\\n        if ($v < 0) {\\r\\n            $out[] = abs($v);\\r\\n        } else {\\r\\n            $in[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($in)) {\\r\\n        $where[\'id:IN\'] = $in;\\r\\n    }\\r\\n    if (!empty($out)) {\\r\\n        $where[\'id:NOT IN\'] = $out;\\r\\n    }\\r\\n} \\/\\/ Filter by parents\\r\\nelse {\\r\\n    if (!empty($parents) && $parents > 0) {\\r\\n        $pids = array_map(\'trim\', explode(\',\', $parents));\\r\\n        $parents = $pids;\\r\\n        if (!empty($depth) && $depth > 0) {\\r\\n            foreach ($pids as $v) {\\r\\n                if (!is_numeric($v)) {\\r\\n                    continue;\\r\\n                }\\r\\n                $parents = array_merge($parents, $modx->getChildIds($v, $depth));\\r\\n            }\\r\\n        }\\r\\n        if (!empty($parents)) {\\r\\n            $where[\'Ticket.parent:IN\'] = $parents;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\nif ($action == \'comments\') {\\r\\n    $class = \'TicketComment\';\\r\\n\\r\\n    $innerJoin = array();\\r\\n    $innerJoin[\'Thread\'] = empty($user)\\r\\n        ? array(\\r\\n            \'class\' => \'TicketThread\',\\r\\n            \'on\' => \'`TicketComment`.`id` = `Thread`.`comment_last` AND `Thread`.`deleted` = 0\',\\r\\n        )\\r\\n        : array(\\r\\n            \'class\' => \'TicketThread\',\\r\\n            \'on\' => \'`TicketComment`.`thread` = `Thread`.`id` AND `Thread`.`deleted` = 0\',\\r\\n        );\\r\\n    $innerJoin[\'Ticket\'] = array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\');\\r\\n\\r\\n    $leftJoin = array(\\r\\n        \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n        \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\r\\n        \'Profile\' => array(\\r\\n            \'class\' => \'modUserProfile\',\\r\\n            \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\',\\r\\n        ),\\r\\n    );\\r\\n\\r\\n    $select = array(\\r\\n        \'TicketComment\' => !empty($includeContent)\\r\\n            ? $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true)\\r\\n            : $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'text\', \'raw\'), true),\\r\\n        \'Ticket\' => !empty($includeContent)\\r\\n            ? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\r\\n            : $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true),\\r\\n        \'Thread\' => \'`Thread`.`comments`\',\\r\\n    );\\r\\n    $groupby = empty($user)\\r\\n        ? \'`Ticket`.`id`\'\\r\\n        : \'`TicketComment`.`id`\';\\r\\n    $where[\'TicketComment.deleted\'] = 0;\\r\\n} elseif ($action == \'tickets\') {\\r\\n    $class = \'Ticket\';\\r\\n\\r\\n    $innerJoin = array();\\r\\n    $leftJoin = array(\\r\\n        \'Thread\' => array(\\r\\n            \'class\' => \'TicketThread\',\\r\\n            \'on\' => \'`Thread`.`resource` = `Ticket`.`id` AND `Thread`.`deleted` = 0\',\\r\\n        ),\\r\\n        \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n        \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\r\\n        \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `Ticket`.`createdby`\'),\\r\\n    );\\r\\n\\r\\n    $select = array(\\r\\n        \'Ticket\' => !empty($includeContent)\\r\\n            ? $modx->getSelectColumns(\'Ticket\', \'Ticket\')\\r\\n            : $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'\', array(\'content\'), true),\\r\\n        \'Thread\' => \'`Thread`.`id` as `thread`, `Thread`.`comments`\',\\r\\n    );\\r\\n    $groupby = \'`Ticket`.`id`\';\\r\\n} else {\\r\\n    return \'Wrong action. You must use \\"ticket\\" or \\"comment\\".\';\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array_merge($select, array(\\r\\n    \'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\r\\n    \'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\r\\n));\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'innerJoin\' => json_encode($innerJoin),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => \'createdon\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'groupby\' => $groupby,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    foreach ($rows as $k => $row) {\\r\\n        \\/\\/ Prepare row\\r\\n        if ($class == \'Ticket\') {\\r\\n            $row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\r\\n            $properties = is_string($row[\'properties\'])\\r\\n                ? json_decode($row[\'properties\'], true)\\r\\n                : $row[\'properties\'];\\r\\n            if (empty($properties[\'process_tags\'])) {\\r\\n                foreach ($row as $field => $value) {\\r\\n                    $row[$field] = str_replace(\\r\\n                        array(\'[\', \']\', \'`\', \'{\', \'}\'),\\r\\n                        array(\'&#91;\', \'&#93;\', \'&#96;\', \'&#123;\', \'&#125;\'),\\r\\n                        $value\\r\\n                    );\\r\\n                }\\r\\n            }\\r\\n        } else {\\r\\n            if (empty($row[\'createdby\'])) {\\r\\n                $row[\'fullname\'] = $row[\'name\'];\\r\\n                $row[\'guest\'] = 1;\\r\\n            }\\r\\n            $row[\'resource\'] = $row[\'ticket.id\'];\\r\\n            $row = $Tickets->prepareComment($row);\\r\\n        }\\r\\n\\r\\n        \\/\\/ Processing chunk\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = !empty($tpl)\\r\\n            ? $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\'])\\r\\n            : $pdoFetch->getChunk(\'\', $row);\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Returning processed chunks\');\\r\\n}\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\n$output = implode($outputSeparator, $output);\\r\\n\\r\\nif (!empty($cacheKey)) {\\r\\n    $modx->cacheManager->set(\'tickets\\/latest.\' . $cacheKey, $output, $cacheTime);\\r\\n}\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"TicketLatestLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:23:{s:6:\\"action\\";a:7:{s:4:\\"name\\";s:6:\\"action\\";s:4:\\"desc\\";s:19:\\"tickets_prop_action\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:8:\\"Comments\\";s:5:\\"value\\";s:8:\\"comments\\";}i:1;a:2:{s:4:\\"text\\";s:7:\\"Tickets\\";s:5:\\"value\\";s:7:\\"tickets\\";}}s:5:\\"value\\";s:8:\\"comments\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:26:\\"tpl.Tickets.comment.latest\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:18:\\"tickets_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:19:\\"tickets_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:23:\\"tickets_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:23:\\"tickets_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"user\\";a:7:{s:4:\\"name\\";s:4:\\"user\\";s:4:\\"desc\\";s:17:\\"tickets_prop_user\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"cacheKey\\";a:7:{s:4:\\"name\\";s:8:\\"cacheKey\\";s:4:\\"desc\\";s:21:\\"tickets_prop_cacheKey\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"cacheTime\\";a:7:{s:4:\\"name\\";s:9:\\"cacheTime\\";s:4:\\"desc\\";s:22:\\"tickets_prop_cacheTime\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1800;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.ticket_latest.php","content":"\\/** @var array $scriptProperties *\\/\\r\\nif (!empty($cacheKey) && $output = $modx->cacheManager->get(\'tickets\\/latest.\' . $cacheKey)) {\\r\\n    return $output;\\r\\n}\\r\\n\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (empty($action)) {\\r\\n    $action = \'comments\';\\r\\n}\\r\\nif ($action == \'tickets\' && $scriptProperties[\'tpl\'] == \'tpl.Tickets.comment.latest\') {\\r\\n    $scriptProperties[\'tpl\'] = \'tpl.Tickets.ticket.latest\';\\r\\n}\\r\\n$action = strtolower($action);\\r\\n$where = $action == \'tickets\'\\r\\n    ? array(\'class_key\' => \'Ticket\')\\r\\n    : array();\\r\\n\\r\\nif (empty($showUnpublished)) {\\r\\n    $where[\'Ticket.published\'] = 1;\\r\\n}\\r\\nif (empty($showHidden)) {\\r\\n    $where[\'Ticket.hidemenu\'] = 0;\\r\\n}\\r\\nif (empty($showDeleted)) {\\r\\n    $where[\'Ticket.deleted\'] = 0;\\r\\n}\\r\\nif (!isset($cacheTime)) {\\r\\n    $cacheTime = 1800;\\r\\n}\\r\\nif (!empty($user)) {\\r\\n    $user = array_map(\'trim\', explode(\',\', $user));\\r\\n    $user_id = $user_username = array();\\r\\n    foreach ($user as $v) {\\r\\n        if (is_numeric($v)) {\\r\\n            $user_id[] = $v;\\r\\n        } else {\\r\\n            $user_username[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($user_id) && !empty($user_username)) {\\r\\n        $where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\',\\r\\n                $user_username) . \'\\\\\'))\';\\r\\n    } else {\\r\\n        if (!empty($user_id)) {\\r\\n            $where[\'User.id:IN\'] = $user_id;\\r\\n        } else {\\r\\n            if (!empty($user_username)) {\\r\\n                $where[\'User.username:IN\'] = $user_username;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Filter by ids\\r\\nif (!empty($resources)) {\\r\\n    $resources = array_map(\'trim\', explode(\',\', $resources));\\r\\n    $in = $out = array();\\r\\n    foreach ($resources as $v) {\\r\\n        if (!is_numeric($v)) {\\r\\n            continue;\\r\\n        }\\r\\n        if ($v < 0) {\\r\\n            $out[] = abs($v);\\r\\n        } else {\\r\\n            $in[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($in)) {\\r\\n        $where[\'id:IN\'] = $in;\\r\\n    }\\r\\n    if (!empty($out)) {\\r\\n        $where[\'id:NOT IN\'] = $out;\\r\\n    }\\r\\n} \\/\\/ Filter by parents\\r\\nelse {\\r\\n    if (!empty($parents) && $parents > 0) {\\r\\n        $pids = array_map(\'trim\', explode(\',\', $parents));\\r\\n        $parents = $pids;\\r\\n        if (!empty($depth) && $depth > 0) {\\r\\n            foreach ($pids as $v) {\\r\\n                if (!is_numeric($v)) {\\r\\n                    continue;\\r\\n                }\\r\\n                $parents = array_merge($parents, $modx->getChildIds($v, $depth));\\r\\n            }\\r\\n        }\\r\\n        if (!empty($parents)) {\\r\\n            $where[\'Ticket.parent:IN\'] = $parents;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\nif ($action == \'comments\') {\\r\\n    $class = \'TicketComment\';\\r\\n\\r\\n    $innerJoin = array();\\r\\n    $innerJoin[\'Thread\'] = empty($user)\\r\\n        ? array(\\r\\n            \'class\' => \'TicketThread\',\\r\\n            \'on\' => \'`TicketComment`.`id` = `Thread`.`comment_last` AND `Thread`.`deleted` = 0\',\\r\\n        )\\r\\n        : array(\\r\\n            \'class\' => \'TicketThread\',\\r\\n            \'on\' => \'`TicketComment`.`thread` = `Thread`.`id` AND `Thread`.`deleted` = 0\',\\r\\n        );\\r\\n    $innerJoin[\'Ticket\'] = array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\');\\r\\n\\r\\n    $leftJoin = array(\\r\\n        \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n        \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\r\\n        \'Profile\' => array(\\r\\n            \'class\' => \'modUserProfile\',\\r\\n            \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\',\\r\\n        ),\\r\\n    );\\r\\n\\r\\n    $select = array(\\r\\n        \'TicketComment\' => !empty($includeContent)\\r\\n            ? $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true)\\r\\n            : $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'text\', \'raw\'), true),\\r\\n        \'Ticket\' => !empty($includeContent)\\r\\n            ? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\r\\n            : $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true),\\r\\n        \'Thread\' => \'`Thread`.`comments`\',\\r\\n    );\\r\\n    $groupby = empty($user)\\r\\n        ? \'`Ticket`.`id`\'\\r\\n        : \'`TicketComment`.`id`\';\\r\\n    $where[\'TicketComment.deleted\'] = 0;\\r\\n} elseif ($action == \'tickets\') {\\r\\n    $class = \'Ticket\';\\r\\n\\r\\n    $innerJoin = array();\\r\\n    $leftJoin = array(\\r\\n        \'Thread\' => array(\\r\\n            \'class\' => \'TicketThread\',\\r\\n            \'on\' => \'`Thread`.`resource` = `Ticket`.`id` AND `Thread`.`deleted` = 0\',\\r\\n        ),\\r\\n        \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n        \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\r\\n        \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `Ticket`.`createdby`\'),\\r\\n    );\\r\\n\\r\\n    $select = array(\\r\\n        \'Ticket\' => !empty($includeContent)\\r\\n            ? $modx->getSelectColumns(\'Ticket\', \'Ticket\')\\r\\n            : $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'\', array(\'content\'), true),\\r\\n        \'Thread\' => \'`Thread`.`id` as `thread`, `Thread`.`comments`\',\\r\\n    );\\r\\n    $groupby = \'`Ticket`.`id`\';\\r\\n} else {\\r\\n    return \'Wrong action. You must use \\"ticket\\" or \\"comment\\".\';\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array_merge($select, array(\\r\\n    \'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\r\\n    \'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\r\\n));\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'innerJoin\' => json_encode($innerJoin),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => \'createdon\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'groupby\' => $groupby,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    foreach ($rows as $k => $row) {\\r\\n        \\/\\/ Prepare row\\r\\n        if ($class == \'Ticket\') {\\r\\n            $row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\r\\n            $properties = is_string($row[\'properties\'])\\r\\n                ? json_decode($row[\'properties\'], true)\\r\\n                : $row[\'properties\'];\\r\\n            if (empty($properties[\'process_tags\'])) {\\r\\n                foreach ($row as $field => $value) {\\r\\n                    $row[$field] = str_replace(\\r\\n                        array(\'[\', \']\', \'`\', \'{\', \'}\'),\\r\\n                        array(\'&#91;\', \'&#93;\', \'&#96;\', \'&#123;\', \'&#125;\'),\\r\\n                        $value\\r\\n                    );\\r\\n                }\\r\\n            }\\r\\n        } else {\\r\\n            if (empty($row[\'createdby\'])) {\\r\\n                $row[\'fullname\'] = $row[\'name\'];\\r\\n                $row[\'guest\'] = 1;\\r\\n            }\\r\\n            $row[\'resource\'] = $row[\'ticket.id\'];\\r\\n            $row = $Tickets->prepareComment($row);\\r\\n        }\\r\\n\\r\\n        \\/\\/ Processing chunk\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = !empty($tpl)\\r\\n            ? $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\'])\\r\\n            : $pdoFetch->getChunk(\'\', $row);\\r\\n    }\\r\\n    $pdoFetch->addTime(\'Returning processed chunks\');\\r\\n}\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\n$output = implode($outputSeparator, $output);\\r\\n\\r\\nif (!empty($cacheKey)) {\\r\\n    $modx->cacheManager->set(\'tickets\\/latest.\' . $cacheKey, $output, $cacheTime);\\r\\n}\\r\\n\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $output .= \'<pre class=\\"TicketLatestLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '964a7013599917ecab18d2aa793062f9',
        'native_key' => NULL,
        'signature' => '4ba285ec51bc237bb0b2312bd046de1a',
      ),
      '976733d27ed119b31af331ae934e122b' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"TicketMeta","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n$scriptProperties[\'nestedChunkPrefix\'] = \'tickets_\';\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (empty($id)) {\\r\\n    $id = $modx->resource->id;\\r\\n}\\r\\n\\/** @var Ticket|modResource $ticket *\\/\\r\\nif (!$ticket = $modx->getObject(\'modResource\', array(\'id\' => $id))) {\\r\\n    return \'Could not load resource with id = \' . $id;\\r\\n}\\r\\n\\r\\n$class = $ticket instanceof Ticket\\r\\n    ? \'Ticket\'\\r\\n    : \'modResource\';\\r\\n\\r\\n\\/** @var TicketTotal $total *\\/\\r\\nif ($class == \'Ticket\' && $total = $ticket->getOne(\'Total\')) {\\r\\n    $total->fetchValues();\\r\\n    $total->save();\\r\\n}\\r\\n$data = $ticket->toArray();\\r\\n$data[\'date_ago\'] = $Tickets->dateFormat($data[\'createdon\']);\\r\\n\\r\\n$vote = $pdoFetch->getObject(\'TicketVote\',\\r\\n    array(\\r\\n        \'id\' => $ticket->id,\\r\\n        \'class\' => \'Ticket\',\\r\\n        \'createdby\' => $modx->user->id,\\r\\n    ),\\r\\n    array(\\r\\n        \'select\' => \'value\',\\r\\n        \'sortby\' => \'id\',\\r\\n    )\\r\\n);\\r\\nif (!empty($vote)) {\\r\\n    $data[\'vote\'] = $vote[\'value\'];\\r\\n}\\r\\n\\r\\n$star = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\', \'createdby\' => $modx->user->id));\\r\\n$data[\'stared\'] = !empty($star);\\r\\n$data[\'unstared\'] = empty($star);\\r\\n\\r\\nif ($class != \'Ticket\') {\\r\\n    \\/\\/ Rating\\r\\n    if (!$modx->user->id || $modx->user->id == $ticket->createdby) {\\r\\n        $data[\'voted\'] = 0;\\r\\n    } else {\\r\\n        $q = $modx->newQuery(\'TicketVote\');\\r\\n        $q->where(array(\'id\' => $ticket->id, \'createdby\' => $modx->user->id, \'class\' => \'Ticket\'));\\r\\n        $q->select(\'`value`\');\\r\\n        $tstart = microtime(true);\\r\\n        if ($q->prepare() && $q->stmt->execute()) {\\r\\n            $modx->startTime += microtime(true) - $tstart;\\r\\n            $modx->executedQueries++;\\r\\n            $voted = $q->stmt->fetchColumn();\\r\\n            if ($voted > 0) {\\r\\n                $voted = 1;\\r\\n            } elseif ($voted < 0) {\\r\\n                $voted = -1;\\r\\n            }\\r\\n            $data[\'voted\'] = $voted;\\r\\n        }\\r\\n    }\\r\\n    $data[\'can_vote\'] = $data[\'voted\'] === false && $Tickets->authenticated && $modx->user->id != $ticket->createdby;\\r\\n    $data = array_merge($ticket->getProperties(\'tickets\'), $data);\\r\\n    if (!isset($data[\'rating\'])) {\\r\\n        $data[\'rating\'] = $data[\'rating_total\'] = $data[\'rating_plus\'] = $data[\'rating_minus\'] = 0;\\r\\n    }\\r\\n\\r\\n    \\/\\/ Views\\r\\n    $data[\'views\'] = $modx->getCount(\'TicketView\', array(\'parent\' => $ticket->id));\\r\\n\\r\\n    \\/\\/ Comments\\r\\n    $data[\'comments\'] = 0;\\r\\n    $thread = empty($thread)\\r\\n        ? \'resource-\' . $ticket->id\\r\\n        : $thread;\\r\\n    $q = $modx->newQuery(\'TicketThread\', array(\'name\' => $thread));\\r\\n    $q->leftJoin(\'TicketComment\', \'TicketComment\',\\r\\n        \\"TicketThread.id = TicketComment.thread AND TicketComment.published = 1\\"\\r\\n    );\\r\\n    $q->select(\'COUNT(`TicketComment`.`id`) as `comments`\');\\r\\n    $tstart = microtime(true);\\r\\n    if ($q->prepare() && $q->stmt->execute()) {\\r\\n        $modx->startTime += microtime(true) - $tstart;\\r\\n        $modx->executedQueries++;\\r\\n        $data[\'comments\'] = (int)$q->stmt->fetchColumn();\\r\\n    }\\r\\n\\r\\n    \\/\\/ Stars\\r\\n    $data[\'stars\'] = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\'));\\r\\n}\\r\\n\\r\\nif ($data[\'rating\'] > 0) {\\r\\n    $data[\'rating\'] = \'+\' . $data[\'rating\'];\\r\\n    $data[\'rating_positive\'] = 1;\\r\\n} elseif ($data[\'rating\'] < 0) {\\r\\n    $data[\'rating_negative\'] = 1;\\r\\n}\\r\\n$data[\'rating_total\'] = abs($data[\'rating_plus\']) + abs($data[\'rating_minus\']);\\r\\n\\r\\n\\/** @var TicketsSection $section *\\/\\r\\nif ($section = $modx->getObject(\'TicketsSection\', array(\'id\' => $ticket->parent))) {\\r\\n    $data = array_merge($data, $section->toArray(\'section.\'));\\r\\n}\\r\\nif (isset($data[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'])) {\\r\\n    if ($data[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] !== \'\') {\\r\\n        $max = strtotime($data[\'createdon\']) + ((float)$data[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] * 86400);\\r\\n        if (time() > $max) {\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!isset($data[\'cant_vote\'])) {\\r\\n    if (!$Tickets->authenticated || $modx->user->id == $ticket->createdby) {\\r\\n        $data[\'cant_vote\'] = 1;\\r\\n\\r\\n    } elseif (array_key_exists(\'vote\', $data)) {\\r\\n        if ($data[\'vote\'] == \'\') {\\r\\n            $data[\'can_vote\'] = 1;\\r\\n        } elseif ($data[\'vote\'] > 0) {\\r\\n            $data[\'voted_plus\'] = 1;\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        } elseif ($data[\'vote\'] < 0) {\\r\\n            $data[\'voted_minus\'] = 1;\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        } else {\\r\\n            $data[\'voted_none\'] = 1;\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        }\\r\\n    } else {\\r\\n        $data[\'can_vote\'] = 1;\\r\\n    }\\r\\n}\\r\\n\\r\\n$data[\'active\'] = (int)!empty($data[\'can_vote\']);\\r\\n$data[\'inactive\'] = (int)!empty($data[\'cant_vote\']);\\r\\n$data[\'can_star\'] = $Tickets->authenticated;\\r\\n\\r\\nif (!empty($getUser)) {\\r\\n    $fields = $modx->getFieldMeta(\'modUserProfile\');\\r\\n    $user = $pdoFetch->getObject(\'modUserProfile\', array(\'internalKey\' => $ticket->createdby), array(\\r\\n        \'innerJoin\' => array(\\r\\n            \'modUser\' => array(\'class\' => \'modUser\', \'on\' => \'modUserProfile.internalKey = modUser.id\'),\\r\\n        ),\\r\\n        \'select\' => array(\\r\\n            \'modUserProfile\' => implode(\',\', array_keys($fields)),\\r\\n            \'modUser\' => \'username\',\\r\\n        ),\\r\\n    ));\\r\\n    if ($user) {\\r\\n        $data = array_merge($data, $user);\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($getFiles)) {\\r\\n    $where = array(\'deleted\' => 0, \'class\' => \'Ticket\', \'parent\' => $ticket->id);\\r\\n    $collection = $pdoFetch->getCollection(\'TicketFile\', $where, array(\'sortby\' => \'createdon\', \'sortdir\' => \'ASC\'));\\r\\n    $data[\'files\'] = $content = \'\';\\r\\n    if (!empty($unusedFiles)) {\\r\\n        $content = $ticket->getContent();\\r\\n    }\\r\\n    foreach ($collection as $item) {\\r\\n        if ($content && strpos($content, $item[\'url\']) !== false) {\\r\\n            continue;\\r\\n        }\\r\\n        $item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\r\\n        $data[\'files\'] .= !empty($tplFile)\\r\\n            ? $Tickets->getChunk($tplFile, $item)\\r\\n            : $Tickets->getChunk(\'\', $item);\\r\\n    }\\r\\n    $data[\'has_files\'] = !empty($data[\'files\']);\\r\\n}\\r\\n$data[\'id\'] = $ticket->get(\'id\');\\r\\n\\r\\nreturn !empty($tpl)\\r\\n    ? $Tickets->getChunk($tpl, $data)\\r\\n    : $Tickets->getChunk(\'\', $data);","locked":0,"properties":"a:6:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:21:\\"tickets_prop_meta_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:16:\\"tpl.Tickets.meta\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplFile\\";a:7:{s:4:\\"name\\";s:7:\\"tplFile\\";s:4:\\"desc\\";s:25:\\"tickets_prop_meta_tplFile\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:21:\\"tpl.Tickets.meta.file\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"getUser\\";a:7:{s:4:\\"name\\";s:7:\\"getUser\\";s:4:\\"desc\\";s:20:\\"tickets_prop_getUser\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"getFiles\\";a:7:{s:4:\\"name\\";s:8:\\"getFiles\\";s:4:\\"desc\\";s:21:\\"tickets_prop_getFiles\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"unusedFiles\\";a:7:{s:4:\\"name\\";s:11:\\"unusedFiles\\";s:4:\\"desc\\";s:24:\\"tickets_prop_unusedFiles\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:19:\\"tickets_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.ticket_meta.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n$scriptProperties[\'nestedChunkPrefix\'] = \'tickets_\';\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (empty($id)) {\\r\\n    $id = $modx->resource->id;\\r\\n}\\r\\n\\/** @var Ticket|modResource $ticket *\\/\\r\\nif (!$ticket = $modx->getObject(\'modResource\', array(\'id\' => $id))) {\\r\\n    return \'Could not load resource with id = \' . $id;\\r\\n}\\r\\n\\r\\n$class = $ticket instanceof Ticket\\r\\n    ? \'Ticket\'\\r\\n    : \'modResource\';\\r\\n\\r\\n\\/** @var TicketTotal $total *\\/\\r\\nif ($class == \'Ticket\' && $total = $ticket->getOne(\'Total\')) {\\r\\n    $total->fetchValues();\\r\\n    $total->save();\\r\\n}\\r\\n$data = $ticket->toArray();\\r\\n$data[\'date_ago\'] = $Tickets->dateFormat($data[\'createdon\']);\\r\\n\\r\\n$vote = $pdoFetch->getObject(\'TicketVote\',\\r\\n    array(\\r\\n        \'id\' => $ticket->id,\\r\\n        \'class\' => \'Ticket\',\\r\\n        \'createdby\' => $modx->user->id,\\r\\n    ),\\r\\n    array(\\r\\n        \'select\' => \'value\',\\r\\n        \'sortby\' => \'id\',\\r\\n    )\\r\\n);\\r\\nif (!empty($vote)) {\\r\\n    $data[\'vote\'] = $vote[\'value\'];\\r\\n}\\r\\n\\r\\n$star = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\', \'createdby\' => $modx->user->id));\\r\\n$data[\'stared\'] = !empty($star);\\r\\n$data[\'unstared\'] = empty($star);\\r\\n\\r\\nif ($class != \'Ticket\') {\\r\\n    \\/\\/ Rating\\r\\n    if (!$modx->user->id || $modx->user->id == $ticket->createdby) {\\r\\n        $data[\'voted\'] = 0;\\r\\n    } else {\\r\\n        $q = $modx->newQuery(\'TicketVote\');\\r\\n        $q->where(array(\'id\' => $ticket->id, \'createdby\' => $modx->user->id, \'class\' => \'Ticket\'));\\r\\n        $q->select(\'`value`\');\\r\\n        $tstart = microtime(true);\\r\\n        if ($q->prepare() && $q->stmt->execute()) {\\r\\n            $modx->startTime += microtime(true) - $tstart;\\r\\n            $modx->executedQueries++;\\r\\n            $voted = $q->stmt->fetchColumn();\\r\\n            if ($voted > 0) {\\r\\n                $voted = 1;\\r\\n            } elseif ($voted < 0) {\\r\\n                $voted = -1;\\r\\n            }\\r\\n            $data[\'voted\'] = $voted;\\r\\n        }\\r\\n    }\\r\\n    $data[\'can_vote\'] = $data[\'voted\'] === false && $Tickets->authenticated && $modx->user->id != $ticket->createdby;\\r\\n    $data = array_merge($ticket->getProperties(\'tickets\'), $data);\\r\\n    if (!isset($data[\'rating\'])) {\\r\\n        $data[\'rating\'] = $data[\'rating_total\'] = $data[\'rating_plus\'] = $data[\'rating_minus\'] = 0;\\r\\n    }\\r\\n\\r\\n    \\/\\/ Views\\r\\n    $data[\'views\'] = $modx->getCount(\'TicketView\', array(\'parent\' => $ticket->id));\\r\\n\\r\\n    \\/\\/ Comments\\r\\n    $data[\'comments\'] = 0;\\r\\n    $thread = empty($thread)\\r\\n        ? \'resource-\' . $ticket->id\\r\\n        : $thread;\\r\\n    $q = $modx->newQuery(\'TicketThread\', array(\'name\' => $thread));\\r\\n    $q->leftJoin(\'TicketComment\', \'TicketComment\',\\r\\n        \\"TicketThread.id = TicketComment.thread AND TicketComment.published = 1\\"\\r\\n    );\\r\\n    $q->select(\'COUNT(`TicketComment`.`id`) as `comments`\');\\r\\n    $tstart = microtime(true);\\r\\n    if ($q->prepare() && $q->stmt->execute()) {\\r\\n        $modx->startTime += microtime(true) - $tstart;\\r\\n        $modx->executedQueries++;\\r\\n        $data[\'comments\'] = (int)$q->stmt->fetchColumn();\\r\\n    }\\r\\n\\r\\n    \\/\\/ Stars\\r\\n    $data[\'stars\'] = $modx->getCount(\'TicketStar\', array(\'id\' => $ticket->id, \'class\' => \'Ticket\'));\\r\\n}\\r\\n\\r\\nif ($data[\'rating\'] > 0) {\\r\\n    $data[\'rating\'] = \'+\' . $data[\'rating\'];\\r\\n    $data[\'rating_positive\'] = 1;\\r\\n} elseif ($data[\'rating\'] < 0) {\\r\\n    $data[\'rating_negative\'] = 1;\\r\\n}\\r\\n$data[\'rating_total\'] = abs($data[\'rating_plus\']) + abs($data[\'rating_minus\']);\\r\\n\\r\\n\\/** @var TicketsSection $section *\\/\\r\\nif ($section = $modx->getObject(\'TicketsSection\', array(\'id\' => $ticket->parent))) {\\r\\n    $data = array_merge($data, $section->toArray(\'section.\'));\\r\\n}\\r\\nif (isset($data[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'])) {\\r\\n    if ($data[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] !== \'\') {\\r\\n        $max = strtotime($data[\'createdon\']) + ((float)$data[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] * 86400);\\r\\n        if (time() > $max) {\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nif (!isset($data[\'cant_vote\'])) {\\r\\n    if (!$Tickets->authenticated || $modx->user->id == $ticket->createdby) {\\r\\n        $data[\'cant_vote\'] = 1;\\r\\n\\r\\n    } elseif (array_key_exists(\'vote\', $data)) {\\r\\n        if ($data[\'vote\'] == \'\') {\\r\\n            $data[\'can_vote\'] = 1;\\r\\n        } elseif ($data[\'vote\'] > 0) {\\r\\n            $data[\'voted_plus\'] = 1;\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        } elseif ($data[\'vote\'] < 0) {\\r\\n            $data[\'voted_minus\'] = 1;\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        } else {\\r\\n            $data[\'voted_none\'] = 1;\\r\\n            $data[\'cant_vote\'] = 1;\\r\\n        }\\r\\n    } else {\\r\\n        $data[\'can_vote\'] = 1;\\r\\n    }\\r\\n}\\r\\n\\r\\n$data[\'active\'] = (int)!empty($data[\'can_vote\']);\\r\\n$data[\'inactive\'] = (int)!empty($data[\'cant_vote\']);\\r\\n$data[\'can_star\'] = $Tickets->authenticated;\\r\\n\\r\\nif (!empty($getUser)) {\\r\\n    $fields = $modx->getFieldMeta(\'modUserProfile\');\\r\\n    $user = $pdoFetch->getObject(\'modUserProfile\', array(\'internalKey\' => $ticket->createdby), array(\\r\\n        \'innerJoin\' => array(\\r\\n            \'modUser\' => array(\'class\' => \'modUser\', \'on\' => \'modUserProfile.internalKey = modUser.id\'),\\r\\n        ),\\r\\n        \'select\' => array(\\r\\n            \'modUserProfile\' => implode(\',\', array_keys($fields)),\\r\\n            \'modUser\' => \'username\',\\r\\n        ),\\r\\n    ));\\r\\n    if ($user) {\\r\\n        $data = array_merge($data, $user);\\r\\n    }\\r\\n}\\r\\n\\r\\nif (!empty($getFiles)) {\\r\\n    $where = array(\'deleted\' => 0, \'class\' => \'Ticket\', \'parent\' => $ticket->id);\\r\\n    $collection = $pdoFetch->getCollection(\'TicketFile\', $where, array(\'sortby\' => \'createdon\', \'sortdir\' => \'ASC\'));\\r\\n    $data[\'files\'] = $content = \'\';\\r\\n    if (!empty($unusedFiles)) {\\r\\n        $content = $ticket->getContent();\\r\\n    }\\r\\n    foreach ($collection as $item) {\\r\\n        if ($content && strpos($content, $item[\'url\']) !== false) {\\r\\n            continue;\\r\\n        }\\r\\n        $item[\'size\'] = round($item[\'size\'] \\/ 1024, 2);\\r\\n        $data[\'files\'] .= !empty($tplFile)\\r\\n            ? $Tickets->getChunk($tplFile, $item)\\r\\n            : $Tickets->getChunk(\'\', $item);\\r\\n    }\\r\\n    $data[\'has_files\'] = !empty($data[\'files\']);\\r\\n}\\r\\n$data[\'id\'] = $ticket->get(\'id\');\\r\\n\\r\\nreturn !empty($tpl)\\r\\n    ? $Tickets->getChunk($tpl, $data)\\r\\n    : $Tickets->getChunk(\'\', $data);"}',
        'guid' => '375fe81e3ccd98e94077e26a3f8a009e',
        'native_key' => NULL,
        'signature' => 'fe726d3e3dd1e2df8689989059e911e3',
      ),
      'b638d78f6d4cfcc558e3cc5d58b0e96a' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getTickets","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\n$class = \'Ticket\';\\r\\n$where = array(\'class_key\' => $class);\\r\\n\\r\\n\\/\\/ Filter by user\\r\\nif (!empty($user)) {\\r\\n    $user = array_map(\'trim\', explode(\',\', $user));\\r\\n    $user_id = $user_username = array();\\r\\n    foreach ($user as $v) {\\r\\n        if (is_numeric($v)) {\\r\\n            $user_id[] = $v;\\r\\n        } else {\\r\\n            $user_username[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($user_id) && !empty($user_username)) {\\r\\n        $where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\',\\r\\n                $user_username) . \'\\\\\'))\';\\r\\n    } else {\\r\\n        if (!empty($user_id)) {\\r\\n            $where[\'User.id:IN\'] = $user_id;\\r\\n        } else {\\r\\n            if (!empty($user_username)) {\\r\\n                $where[\'User.username:IN\'] = $user_username;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$leftJoin = array(\\r\\n    \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n    \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\r\\n    \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `User`.`id`\'),\\r\\n    \'Total\' => array(\'class\' => \'TicketTotal\'),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $leftJoin[\'Vote\'] = array(\\r\\n        \'class\' => \'TicketVote\',\\r\\n        \'on\' => \'`Vote`.`id` = `Ticket`.`id` AND `Vote`.`class` = \\"Ticket\\" AND `Vote`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Star\'] = array(\\r\\n        \'class\' => \'TicketStar\',\\r\\n        \'on\' => \'`Star`.`id` = `Ticket`.`id` AND `Star`.`class` = \\"Ticket\\" AND `Star`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Thread\'] = array(\\r\\n        \'class\' => \'TicketThread\',\\r\\n        \'on\' => \'`Thread`.`resource` = `Ticket`.`id` AND `Thread`.`deleted` = 0\',\\r\\n    );\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\r\\n    \'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\r\\n    \'Ticket\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns($class, $class)\\r\\n        : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\r\\n    \'Total\' => \'comments, views, stars, rating, rating_plus, rating_minus\',\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\r\\n    $select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\r\\n    $select[\'Thread\'] = \'`Thread`.`id` as `thread`\';\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => \'createdon\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'return\' => !empty($returnIds)\\r\\n        ? \'ids\'\\r\\n        : \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    return $rows;\\r\\n}\\r\\nini_set(\'error_reporting\', -1);\\r\\nini_set(\'display_errors\', 1);\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    foreach ($rows as $k => $row) {\\r\\n        \\/\\/ Handle properties\\r\\n        $properties = is_string($row[\'properties\'])\\r\\n            ? json_decode($row[\'properties\'], true)\\r\\n            : $row[\'properties\'];\\r\\n        if (!empty($properties[\'tickets\'])) {\\r\\n            $properties = $properties[\'tickets\'];\\r\\n        }\\r\\n        if (empty($properties[\'process_tags\'])) {\\r\\n            foreach ($row as $field => $value) {\\r\\n                $row[$field] = str_replace(\\r\\n                    array(\'[\', \']\', \'`\', \'{\', \'}\'),\\r\\n                    array(\'&#91;\', \'&#93;\', \'&#96;\', \'&#123;\', \'&#125;\'),\\r\\n                    $value\\r\\n                );\\r\\n            }\\r\\n        }\\r\\n        if (!is_array($properties)) {\\r\\n            $properties = array();\\r\\n        }\\r\\n\\r\\n        \\/\\/ Handle rating\\r\\n        if ($row[\'rating\'] > 0) {\\r\\n            $row[\'rating\'] = \'+\' . $row[\'rating\'];\\r\\n            $row[\'rating_positive\'] = 1;\\r\\n        } elseif ($row[\'rating\'] < 0) {\\r\\n            $row[\'rating_negative\'] = 1;\\r\\n        }\\r\\n        $row[\'rating_total\'] = abs($row[\'rating_plus\']) + abs($row[\'rating_minus\']);\\r\\n        \\/\\/ Handle rating\\r\\n        if (isset($row[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'])) {\\r\\n            if ($row[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] !== \'\') {\\r\\n                $max = $row[\'createdon\'] + ((float)$row[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] * 86400);\\r\\n                if (time() > $max) {\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        if (!isset($row[\'cant_vote\'])) {\\r\\n            if (!$Tickets->authenticated || $modx->user->id == $row[\'createdby\']) {\\r\\n                $row[\'cant_vote\'] = 1;\\r\\n            } elseif (array_key_exists(\'vote\', $row)) {\\r\\n                if ($row[\'vote\'] == \'\') {\\r\\n                    $row[\'can_vote\'] = 1;\\r\\n                } elseif ($row[\'vote\'] > 0) {\\r\\n                    $row[\'voted_plus\'] = 1;\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                } elseif ($row[\'vote\'] < 0) {\\r\\n                    $row[\'voted_minus\'] = 1;\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                } else {\\r\\n                    $row[\'voted_none\'] = 1;\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        \\/\\/ Special fields for quick placeholders\\r\\n        $row[\'active\'] = (int)!empty($row[\'can_vote\']);\\r\\n        $row[\'inactive\'] = (int)!empty($row[\'cant_vote\']);\\r\\n        $row[\'can_star\'] = $Tickets->authenticated;\\r\\n        $row[\'stared\'] = !empty($row[\'star\']);\\r\\n        $row[\'unstared\'] = empty($row[\'star\']);\\r\\n        $row[\'isauthor\'] = $modx->user->id == $row[\'createdby\'];\\r\\n        $row[\'unpublished\'] = empty($row[\'published\']);\\r\\n\\r\\n        $row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n        \\/\\/ Processing new comments\\r\\n        if ($Tickets->authenticated && !empty($row[\'thread\'])) {\\r\\n            $last_view = $pdoFetch->getObject(\'TicketView\', array(\\r\\n                \'parent\' => $row[\'id\'],\\r\\n                \'uid\' => $modx->user->id,\\r\\n            ), array(\\r\\n                \'sortby\' => \'timestamp\',\\r\\n                \'sortdir\' => \'DESC\',\\r\\n                \'limit\' => 1,\\r\\n            ));\\r\\n            if (!empty($last_view[\'timestamp\'])) {\\r\\n                $row[\'new_comments\'] = $modx->getCount(\'TicketComment\', array(\\r\\n                    \'published\' => 1,\\r\\n                    \'thread\' => $row[\'thread\'],\\r\\n                    \'createdon:>\' => $last_view[\'timestamp\'],\\r\\n                    \'createdby:!=\' => $modx->user->id,\\r\\n                ));\\r\\n            } else {\\r\\n                $row[\'new_comments\'] = $row[\'comments\'];\\r\\n            }\\r\\n        } else {\\r\\n            $row[\'new_comments\'] = \'\';\\r\\n        }\\r\\n\\r\\n        \\/\\/ Processing chunk\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = empty($tpl)\\r\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\r\\n            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"getTicketsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (empty($outputSeparator)) {\\r\\n        $outputSeparator = \\"\\\\n\\";\\r\\n    }\\r\\n    $output = implode($outputSeparator, $output);\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $array = array(\'output\' => $output);\\r\\n        if ($Tickets->authenticated && $modx->resource->class_key == \'TicketsSection\') {\\r\\n            \\/** @var TicketsSection $section *\\/\\r\\n            $section = &$modx->resource;\\r\\n            $array[\'subscribed\'] = $section->isSubscribed();\\r\\n        }\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, $array, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:21:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:20:\\"tpl.Tickets.list.row\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:18:\\"tickets_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:19:\\"tickets_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:23:\\"tickets_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:23:\\"tickets_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"user\\";a:7:{s:4:\\"name\\";s:4:\\"user\\";s:4:\\"desc\\";s:17:\\"tickets_prop_user\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:23:\\"tickets_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_tickets.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\n$class = \'Ticket\';\\r\\n$where = array(\'class_key\' => $class);\\r\\n\\r\\n\\/\\/ Filter by user\\r\\nif (!empty($user)) {\\r\\n    $user = array_map(\'trim\', explode(\',\', $user));\\r\\n    $user_id = $user_username = array();\\r\\n    foreach ($user as $v) {\\r\\n        if (is_numeric($v)) {\\r\\n            $user_id[] = $v;\\r\\n        } else {\\r\\n            $user_username[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($user_id) && !empty($user_username)) {\\r\\n        $where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\',\\r\\n                $user_username) . \'\\\\\'))\';\\r\\n    } else {\\r\\n        if (!empty($user_id)) {\\r\\n            $where[\'User.id:IN\'] = $user_id;\\r\\n        } else {\\r\\n            if (!empty($user_username)) {\\r\\n                $where[\'User.username:IN\'] = $user_username;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$leftJoin = array(\\r\\n    \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n    \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `Ticket`.`createdby`\'),\\r\\n    \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `User`.`id`\'),\\r\\n    \'Total\' => array(\'class\' => \'TicketTotal\'),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $leftJoin[\'Vote\'] = array(\\r\\n        \'class\' => \'TicketVote\',\\r\\n        \'on\' => \'`Vote`.`id` = `Ticket`.`id` AND `Vote`.`class` = \\"Ticket\\" AND `Vote`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Star\'] = array(\\r\\n        \'class\' => \'TicketStar\',\\r\\n        \'on\' => \'`Star`.`id` = `Ticket`.`id` AND `Star`.`class` = \\"Ticket\\" AND `Star`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Thread\'] = array(\\r\\n        \'class\' => \'TicketThread\',\\r\\n        \'on\' => \'`Thread`.`resource` = `Ticket`.`id` AND `Thread`.`deleted` = 0\',\\r\\n    );\\r\\n}\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'Section\' => $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\r\\n    \'User\' => $modx->getSelectColumns(\'modUser\', \'User\', \'\', array(\'username\')),\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\'), true),\\r\\n    \'Ticket\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns($class, $class)\\r\\n        : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\r\\n    \'Total\' => \'comments, views, stars, rating, rating_plus, rating_minus\',\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\r\\n    $select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\r\\n    $select[\'Thread\'] = \'`Thread`.`id` as `thread`\';\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => \'createdon\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'return\' => !empty($returnIds)\\r\\n        ? \'ids\'\\r\\n        : \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    return $rows;\\r\\n}\\r\\nini_set(\'error_reporting\', -1);\\r\\nini_set(\'display_errors\', 1);\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    foreach ($rows as $k => $row) {\\r\\n        \\/\\/ Handle properties\\r\\n        $properties = is_string($row[\'properties\'])\\r\\n            ? json_decode($row[\'properties\'], true)\\r\\n            : $row[\'properties\'];\\r\\n        if (!empty($properties[\'tickets\'])) {\\r\\n            $properties = $properties[\'tickets\'];\\r\\n        }\\r\\n        if (empty($properties[\'process_tags\'])) {\\r\\n            foreach ($row as $field => $value) {\\r\\n                $row[$field] = str_replace(\\r\\n                    array(\'[\', \']\', \'`\', \'{\', \'}\'),\\r\\n                    array(\'&#91;\', \'&#93;\', \'&#96;\', \'&#123;\', \'&#125;\'),\\r\\n                    $value\\r\\n                );\\r\\n            }\\r\\n        }\\r\\n        if (!is_array($properties)) {\\r\\n            $properties = array();\\r\\n        }\\r\\n\\r\\n        \\/\\/ Handle rating\\r\\n        if ($row[\'rating\'] > 0) {\\r\\n            $row[\'rating\'] = \'+\' . $row[\'rating\'];\\r\\n            $row[\'rating_positive\'] = 1;\\r\\n        } elseif ($row[\'rating\'] < 0) {\\r\\n            $row[\'rating_negative\'] = 1;\\r\\n        }\\r\\n        $row[\'rating_total\'] = abs($row[\'rating_plus\']) + abs($row[\'rating_minus\']);\\r\\n        \\/\\/ Handle rating\\r\\n        if (isset($row[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'])) {\\r\\n            if ($row[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] !== \'\') {\\r\\n                $max = $row[\'createdon\'] + ((float)$row[\'section.properties\'][\'ratings\'][\'days_ticket_vote\'] * 86400);\\r\\n                if (time() > $max) {\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        if (!isset($row[\'cant_vote\'])) {\\r\\n            if (!$Tickets->authenticated || $modx->user->id == $row[\'createdby\']) {\\r\\n                $row[\'cant_vote\'] = 1;\\r\\n            } elseif (array_key_exists(\'vote\', $row)) {\\r\\n                if ($row[\'vote\'] == \'\') {\\r\\n                    $row[\'can_vote\'] = 1;\\r\\n                } elseif ($row[\'vote\'] > 0) {\\r\\n                    $row[\'voted_plus\'] = 1;\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                } elseif ($row[\'vote\'] < 0) {\\r\\n                    $row[\'voted_minus\'] = 1;\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                } else {\\r\\n                    $row[\'voted_none\'] = 1;\\r\\n                    $row[\'cant_vote\'] = 1;\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        \\/\\/ Special fields for quick placeholders\\r\\n        $row[\'active\'] = (int)!empty($row[\'can_vote\']);\\r\\n        $row[\'inactive\'] = (int)!empty($row[\'cant_vote\']);\\r\\n        $row[\'can_star\'] = $Tickets->authenticated;\\r\\n        $row[\'stared\'] = !empty($row[\'star\']);\\r\\n        $row[\'unstared\'] = empty($row[\'star\']);\\r\\n        $row[\'isauthor\'] = $modx->user->id == $row[\'createdby\'];\\r\\n        $row[\'unpublished\'] = empty($row[\'published\']);\\r\\n\\r\\n        $row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n        \\/\\/ Processing new comments\\r\\n        if ($Tickets->authenticated && !empty($row[\'thread\'])) {\\r\\n            $last_view = $pdoFetch->getObject(\'TicketView\', array(\\r\\n                \'parent\' => $row[\'id\'],\\r\\n                \'uid\' => $modx->user->id,\\r\\n            ), array(\\r\\n                \'sortby\' => \'timestamp\',\\r\\n                \'sortdir\' => \'DESC\',\\r\\n                \'limit\' => 1,\\r\\n            ));\\r\\n            if (!empty($last_view[\'timestamp\'])) {\\r\\n                $row[\'new_comments\'] = $modx->getCount(\'TicketComment\', array(\\r\\n                    \'published\' => 1,\\r\\n                    \'thread\' => $row[\'thread\'],\\r\\n                    \'createdon:>\' => $last_view[\'timestamp\'],\\r\\n                    \'createdby:!=\' => $modx->user->id,\\r\\n                ));\\r\\n            } else {\\r\\n                $row[\'new_comments\'] = $row[\'comments\'];\\r\\n            }\\r\\n        } else {\\r\\n            $row[\'new_comments\'] = \'\';\\r\\n        }\\r\\n\\r\\n        \\/\\/ Processing chunk\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = empty($tpl)\\r\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\r\\n            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"getTicketsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    if (empty($outputSeparator)) {\\r\\n        $outputSeparator = \\"\\\\n\\";\\r\\n    }\\r\\n    $output = implode($outputSeparator, $output);\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $array = array(\'output\' => $output);\\r\\n        if ($Tickets->authenticated && $modx->resource->class_key == \'TicketsSection\') {\\r\\n            \\/** @var TicketsSection $section *\\/\\r\\n            $section = &$modx->resource;\\r\\n            $array[\'subscribed\'] = $section->isSubscribed();\\r\\n        }\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, $array, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => '4867280d4532c417d6f0b78b67a58bd9',
        'native_key' => NULL,
        'signature' => '694a219b7bf47a95ded068d535a8d0c4',
      ),
      'b31458c3bf080c467a0204b24a21d436' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getTicketsSections","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\n$class = \'TicketsSection\';\\r\\n$where = array(\'class_key\' => $class);\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$leftJoin = array(\\r\\n    \'Total\' => array(\'class\' => \'TicketTotal\'),\\r\\n);\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'TicketsSection\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns($class, $class)\\r\\n        : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\r\\n    \'Total\' => \'tickets, comments, views, stars, rating, rating_plus, rating_minus\',\\r\\n);\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'sortby\' => \'views\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'return\' => !empty($returnIds)\\r\\n        ? \'ids\'\\r\\n        : \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    return $rows;\\r\\n}\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    foreach ($rows as $k => $row) {\\r\\n        $row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = empty($tpl)\\r\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\r\\n            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\n$output = implode($outputSeparator, $output);\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"getSectionsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:19:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:24:\\"tpl.Tickets.sections.row\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:18:\\"tickets_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:19:\\"tickets_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"views\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:23:\\"tickets_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:21:\\"tickets_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:21:\\"tickets_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:23:\\"tickets_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_sections.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\nif (isset($parents) && $parents === \'\') {\\r\\n    $scriptProperties[\'parents\'] = $modx->resource->id;\\r\\n}\\r\\n\\r\\n$class = \'TicketsSection\';\\r\\n$where = array(\'class_key\' => $class);\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$leftJoin = array(\\r\\n    \'Total\' => array(\'class\' => \'TicketTotal\'),\\r\\n);\\r\\n\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'TicketsSection\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns($class, $class)\\r\\n        : $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true),\\r\\n    \'Total\' => \'tickets, comments, views, stars, rating, rating_plus, rating_minus\',\\r\\n);\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'sortby\' => \'views\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'return\' => !empty($returnIds)\\r\\n        ? \'ids\'\\r\\n        : \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties));\\r\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\nif (!empty($returnIds)) {\\r\\n    return $rows;\\r\\n}\\r\\n\\r\\n\\/\\/ Processing rows\\r\\n$output = array();\\r\\nif (!empty($rows) && is_array($rows)) {\\r\\n    foreach ($rows as $k => $row) {\\r\\n        $row[\'date_ago\'] = $Tickets->dateFormat($row[\'createdon\']);\\r\\n        $row[\'idx\'] = $pdoFetch->idx++;\\r\\n\\r\\n        $tpl = $pdoFetch->defineChunk($row);\\r\\n        $output[] = empty($tpl)\\r\\n            ? \'<pre>\' . $pdoFetch->getChunk(\'\', $row) . \'<\\/pre>\'\\r\\n            : $pdoFetch->getChunk($tpl, $row, $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\nif (empty($outputSeparator)) {\\r\\n    $outputSeparator = \\"\\\\n\\";\\r\\n}\\r\\n$output = implode($outputSeparator, $output);\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"getSectionsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => 'e67039c920e1942995a90af279bcbe8d',
        'native_key' => NULL,
        'signature' => 'f8b01cfdeb7fbad45c63ed410b5393e6',
      ),
      '6b5f6f282740bff567e8571aee1250ef' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getComments","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.Tickets.comment.list.row\');\\r\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\r\\n\\r\\n\\/\\/ Define threads of comments\\r\\nif (!empty($parents) || !empty($resources) || !empty($threads)) {\\r\\n    $where = array();\\r\\n    $options = array(\\r\\n        \'innerJoin\' => array(\\r\\n            \'Thread\' => array(\\r\\n                \'class\' => \'TicketThread\',\\r\\n                \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\',\\r\\n            ),\\r\\n        ),\\r\\n        \'groupby\' => \'`Ticket`.`id`\',\\r\\n        \'select\' => array(\'Thread\' => \'`Thread`.`id`\'),\\r\\n        \'showUnpublished\' => !empty($showUnpublished),\\r\\n        \'showDeleted\' => !empty($showDeleted),\\r\\n        \'depth\' => isset($depth)\\r\\n            ? (int)$depth\\r\\n            : 10,\\r\\n    );\\r\\n    if (!empty($parents)) {\\r\\n        $options[\'parents\'] = $parents;\\r\\n    }\\r\\n    if (!empty($resources)) {\\r\\n        $options[\'resources\'] = $resources;\\r\\n    }\\r\\n    if (!empty($threads)) {\\r\\n        $threads = array_map(\'trim\', explode(\',\', $threads));\\r\\n        $threads_in = $threads_out = array();\\r\\n        foreach ($threads as $v) {\\r\\n            if (!is_numeric($v)) {\\r\\n                continue;\\r\\n            }\\r\\n            if ($v[0] == \'-\') {\\r\\n                $threads_out[] = abs($v);\\r\\n            } else {\\r\\n                $threads_in[] = abs($v);\\r\\n            }\\r\\n        }\\r\\n        if (!empty($threads_in)) {\\r\\n            $where[\'Thread.id:IN\'] = $threads_in;\\r\\n        }\\r\\n        if (!empty($threads_out)) {\\r\\n            $where[\'Thread.id:NOT IN\'] = $threads_out;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $rows = $pdoFetch->getCollection(\'Ticket\', $where, $options);\\r\\n    $threads = array();\\r\\n    foreach ($rows as $item) {\\r\\n        $threads[] = $item[\'id\'];\\r\\n    }\\r\\n    if (!count($threads)) {\\r\\n        return;\\r\\n    };\\r\\n}\\r\\n\\r\\n\\/\\/ Prepare query to db\\r\\n$class = \'TicketComment\';\\r\\n$where = array();\\r\\nif (empty($showUnpublished)) {\\r\\n    $where[\'published\'] = 1;\\r\\n}\\r\\nif (empty($showDeleted)) {\\r\\n    $where[\'deleted\'] = 0;\\r\\n}\\r\\n\\r\\n\\/\\/ Filter by user\\r\\nif (!empty($user)) {\\r\\n    $user = array_map(\'trim\', explode(\',\', $user));\\r\\n    $user_id = $user_username = array();\\r\\n    foreach ($user as $v) {\\r\\n        if (is_numeric($v)) {\\r\\n            $user_id[] = $v;\\r\\n        } else {\\r\\n            $user_username[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($user_id) && !empty($user_username)) {\\r\\n        $where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\',\\r\\n                $user_username) . \'\\\\\'))\';\\r\\n    } elseif (!empty($user_id)) {\\r\\n        $where[\'User.id:IN\'] = $user_id;\\r\\n    } elseif (!empty($user_username)) {\\r\\n        $where[\'User.username:IN\'] = $user_username;\\r\\n    }\\r\\n}\\r\\n\\/\\/ Filter by threads\\r\\nif (!empty($threads)) {\\r\\n    $where[\'thread:IN\'] = $threads;\\r\\n}\\r\\n\\/\\/ Filter by comments\\r\\nif (!empty($comments)) {\\r\\n    $comments = array_map(\'trim\', explode(\',\', $comments));\\r\\n    $comments_in = $comments_out = array();\\r\\n    foreach ($comments as $v) {\\r\\n        if (!is_numeric($v)) {\\r\\n            continue;\\r\\n        }\\r\\n        if ($v[0] == \'-\') {\\r\\n            $comments_out[] = abs($v);\\r\\n        } else {\\r\\n            $comments_in[] = abs($v);\\r\\n        }\\r\\n    }\\r\\n    if (!empty($comments_in)) {\\r\\n        $where[\'id:IN\'] = $comments_in;\\r\\n    }\\r\\n    if (!empty($comments_out)) {\\r\\n        $where[\'id:NOT IN\'] = $comments_out;\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$innerJoin = array(\\r\\n    \'Thread\' => array(\\r\\n        \'class\' => \'TicketThread\',\\r\\n        \'on\' => \'`Thread`.`id` = `TicketComment`.`thread`\',\\r\\n    ),\\r\\n);\\r\\n$leftJoin = array(\\r\\n    \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\r\\n    \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\r\\n    \'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\'),\\r\\n    \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $leftJoin[\'Vote\'] = array(\\r\\n        \'class\' => \'TicketVote\',\\r\\n        \'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Star\'] = array(\\r\\n        \'class\' => \'TicketStar\',\\r\\n        \'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n}\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true),\\r\\n    \'Thread\' => \'`Thread`.`resource`, `Thread`.`comments`\',\\r\\n    \'User\' => \'`User`.`username`\',\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'),\\r\\n            true) . \',`Profile`.`email` as `user_email`\',\\r\\n    \'Ticket\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\r\\n        : $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true),\\r\\n    \'Section\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\')\\r\\n        : $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\r\\n    $select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\r\\n}\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'innerJoin\' => json_encode($innerJoin),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => $class . \'.createdon\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'fastMode\' => true,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$output = array();\\r\\nif (!empty($rows)) {\\r\\n    foreach ($rows as $row) {\\r\\n        $row[\'ratings\'] = !empty($row[\'section.properties\'][\'ratings\'])\\r\\n            ? $row[\'section.properties\'][\'ratings\']\\r\\n            : array();\\r\\n        $output[] = $Tickets->templateNode($row, $tpl);\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\n$output = implode($outputSeparator, $output);\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"getCommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}","locked":0,"properties":"a:15:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.comment.list.row\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:17:\\"tplCommentDeleted\\";a:7:{s:4:\\"name\\";s:17:\\"tplCommentDeleted\\";s:4:\\"desc\\";s:30:\\"tickets_prop_tplCommentDeleted\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:31:\\"tpl.Tickets.comment.one.deleted\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:18:\\"tickets_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"threads\\";a:7:{s:4:\\"name\\";s:7:\\"threads\\";s:4:\\"desc\\";s:20:\\"tickets_prop_threads\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:20:\\"tickets_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:22:\\"tickets_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:19:\\"tickets_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:9:\\"createdon\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:20:\\"tickets_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"includeContent\\";a:7:{s:4:\\"name\\";s:14:\\"includeContent\\";s:4:\\"desc\\";s:27:\\"tickets_prop_includeContent\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:26:\\"tickets_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:18:\\"tickets_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:28:\\"tickets_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:20:\\"tickets_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:28:\\"tickets_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:24:\\"tickets_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_comments.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n$Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n\\r\\n\\/** @var pdoFetch $pdoFetch *\\/\\r\\n$pdoFetch = $modx->getService(\'pdoFetch\');\\r\\n$pdoFetch->setConfig($scriptProperties);\\r\\n$pdoFetch->addTime(\'pdoTools loaded\');\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.Tickets.comment.list.row\');\\r\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\r\\n\\r\\n\\/\\/ Define threads of comments\\r\\nif (!empty($parents) || !empty($resources) || !empty($threads)) {\\r\\n    $where = array();\\r\\n    $options = array(\\r\\n        \'innerJoin\' => array(\\r\\n            \'Thread\' => array(\\r\\n                \'class\' => \'TicketThread\',\\r\\n                \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\',\\r\\n            ),\\r\\n        ),\\r\\n        \'groupby\' => \'`Ticket`.`id`\',\\r\\n        \'select\' => array(\'Thread\' => \'`Thread`.`id`\'),\\r\\n        \'showUnpublished\' => !empty($showUnpublished),\\r\\n        \'showDeleted\' => !empty($showDeleted),\\r\\n        \'depth\' => isset($depth)\\r\\n            ? (int)$depth\\r\\n            : 10,\\r\\n    );\\r\\n    if (!empty($parents)) {\\r\\n        $options[\'parents\'] = $parents;\\r\\n    }\\r\\n    if (!empty($resources)) {\\r\\n        $options[\'resources\'] = $resources;\\r\\n    }\\r\\n    if (!empty($threads)) {\\r\\n        $threads = array_map(\'trim\', explode(\',\', $threads));\\r\\n        $threads_in = $threads_out = array();\\r\\n        foreach ($threads as $v) {\\r\\n            if (!is_numeric($v)) {\\r\\n                continue;\\r\\n            }\\r\\n            if ($v[0] == \'-\') {\\r\\n                $threads_out[] = abs($v);\\r\\n            } else {\\r\\n                $threads_in[] = abs($v);\\r\\n            }\\r\\n        }\\r\\n        if (!empty($threads_in)) {\\r\\n            $where[\'Thread.id:IN\'] = $threads_in;\\r\\n        }\\r\\n        if (!empty($threads_out)) {\\r\\n            $where[\'Thread.id:NOT IN\'] = $threads_out;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    $rows = $pdoFetch->getCollection(\'Ticket\', $where, $options);\\r\\n    $threads = array();\\r\\n    foreach ($rows as $item) {\\r\\n        $threads[] = $item[\'id\'];\\r\\n    }\\r\\n    if (!count($threads)) {\\r\\n        return;\\r\\n    };\\r\\n}\\r\\n\\r\\n\\/\\/ Prepare query to db\\r\\n$class = \'TicketComment\';\\r\\n$where = array();\\r\\nif (empty($showUnpublished)) {\\r\\n    $where[\'published\'] = 1;\\r\\n}\\r\\nif (empty($showDeleted)) {\\r\\n    $where[\'deleted\'] = 0;\\r\\n}\\r\\n\\r\\n\\/\\/ Filter by user\\r\\nif (!empty($user)) {\\r\\n    $user = array_map(\'trim\', explode(\',\', $user));\\r\\n    $user_id = $user_username = array();\\r\\n    foreach ($user as $v) {\\r\\n        if (is_numeric($v)) {\\r\\n            $user_id[] = $v;\\r\\n        } else {\\r\\n            $user_username[] = $v;\\r\\n        }\\r\\n    }\\r\\n    if (!empty($user_id) && !empty($user_username)) {\\r\\n        $where[] = \'(`User`.`id` IN (\' . implode(\',\', $user_id) . \') OR `User`.`username` IN (\\\\\'\' . implode(\'\\\\\',\\\\\'\',\\r\\n                $user_username) . \'\\\\\'))\';\\r\\n    } elseif (!empty($user_id)) {\\r\\n        $where[\'User.id:IN\'] = $user_id;\\r\\n    } elseif (!empty($user_username)) {\\r\\n        $where[\'User.username:IN\'] = $user_username;\\r\\n    }\\r\\n}\\r\\n\\/\\/ Filter by threads\\r\\nif (!empty($threads)) {\\r\\n    $where[\'thread:IN\'] = $threads;\\r\\n}\\r\\n\\/\\/ Filter by comments\\r\\nif (!empty($comments)) {\\r\\n    $comments = array_map(\'trim\', explode(\',\', $comments));\\r\\n    $comments_in = $comments_out = array();\\r\\n    foreach ($comments as $v) {\\r\\n        if (!is_numeric($v)) {\\r\\n            continue;\\r\\n        }\\r\\n        if ($v[0] == \'-\') {\\r\\n            $comments_out[] = abs($v);\\r\\n        } else {\\r\\n            $comments_in[] = abs($v);\\r\\n        }\\r\\n    }\\r\\n    if (!empty($comments_in)) {\\r\\n        $where[\'id:IN\'] = $comments_in;\\r\\n    }\\r\\n    if (!empty($comments_out)) {\\r\\n        $where[\'id:NOT IN\'] = $comments_out;\\r\\n    }\\r\\n}\\r\\n\\r\\n\\/\\/ Joining tables\\r\\n$innerJoin = array(\\r\\n    \'Thread\' => array(\\r\\n        \'class\' => \'TicketThread\',\\r\\n        \'on\' => \'`Thread`.`id` = `TicketComment`.`thread`\',\\r\\n    ),\\r\\n);\\r\\n$leftJoin = array(\\r\\n    \'User\' => array(\'class\' => \'modUser\', \'on\' => \'`User`.`id` = `TicketComment`.`createdby`\'),\\r\\n    \'Profile\' => array(\'class\' => \'modUserProfile\', \'on\' => \'`Profile`.`internalKey` = `TicketComment`.`createdby`\'),\\r\\n    \'Ticket\' => array(\'class\' => \'Ticket\', \'on\' => \'`Ticket`.`id` = `Thread`.`resource`\'),\\r\\n    \'Section\' => array(\'class\' => \'TicketsSection\', \'on\' => \'`Section`.`id` = `Ticket`.`parent`\'),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $leftJoin[\'Vote\'] = array(\\r\\n        \'class\' => \'TicketVote\',\\r\\n        \'on\' => \'`Vote`.`id` = `TicketComment`.`id` AND `Vote`.`class` = \\"TicketComment\\" AND `Vote`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n    $leftJoin[\'Star\'] = array(\\r\\n        \'class\' => \'TicketStar\',\\r\\n        \'on\' => \'`Star`.`id` = `TicketComment`.`id` AND `Star`.`class` = \\"TicketComment\\" AND `Star`.`createdby` = \' . $modx->user->id,\\r\\n    );\\r\\n}\\r\\n\\/\\/ Fields to select\\r\\n$select = array(\\r\\n    \'TicketComment\' => $modx->getSelectColumns(\'TicketComment\', \'TicketComment\', \'\', array(\'raw\'), true),\\r\\n    \'Thread\' => \'`Thread`.`resource`, `Thread`.`comments`\',\\r\\n    \'User\' => \'`User`.`username`\',\\r\\n    \'Profile\' => $modx->getSelectColumns(\'modUserProfile\', \'Profile\', \'\', array(\'id\', \'email\'),\\r\\n            true) . \',`Profile`.`email` as `user_email`\',\\r\\n    \'Ticket\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\')\\r\\n        : $modx->getSelectColumns(\'Ticket\', \'Ticket\', \'ticket.\', array(\'content\'), true),\\r\\n    \'Section\' => !empty($includeContent)\\r\\n        ? $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\')\\r\\n        : $modx->getSelectColumns(\'TicketsSection\', \'Section\', \'section.\', array(\'content\'), true),\\r\\n);\\r\\nif ($Tickets->authenticated) {\\r\\n    $select[\'Vote\'] = \'`Vote`.`value` as `vote`\';\\r\\n    $select[\'Star\'] = \'COUNT(`Star`.`id`) as `star`\';\\r\\n}\\r\\n\\r\\n\\/\\/ Add custom parameters\\r\\nforeach (array(\'where\', \'select\', \'leftJoin\', \'innerJoin\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$pdoFetch->addTime(\'Conditions prepared\');\\r\\n\\r\\n$default = array(\\r\\n    \'class\' => $class,\\r\\n    \'where\' => json_encode($where),\\r\\n    \'innerJoin\' => json_encode($innerJoin),\\r\\n    \'leftJoin\' => json_encode($leftJoin),\\r\\n    \'select\' => json_encode($select),\\r\\n    \'sortby\' => $class . \'.createdon\',\\r\\n    \'sortdir\' => \'DESC\',\\r\\n    \'groupby\' => $class . \'.id\',\\r\\n    \'fastMode\' => true,\\r\\n    \'return\' => \'data\',\\r\\n    \'nestedChunkPrefix\' => \'tickets_\',\\r\\n);\\r\\n\\r\\n\\/\\/ Merge all properties and run!\\r\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\r\\n$pdoFetch->addTime(\'Query parameters prepared.\');\\r\\n$rows = $pdoFetch->run();\\r\\n\\r\\n$output = array();\\r\\nif (!empty($rows)) {\\r\\n    foreach ($rows as $row) {\\r\\n        $row[\'ratings\'] = !empty($row[\'section.properties\'][\'ratings\'])\\r\\n            ? $row[\'section.properties\'][\'ratings\']\\r\\n            : array();\\r\\n        $output[] = $Tickets->templateNode($row, $tpl);\\r\\n    }\\r\\n}\\r\\n$pdoFetch->addTime(\'Returning processed chunks\');\\r\\n$output = implode($outputSeparator, $output);\\r\\n\\r\\n$log = \'\';\\r\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\r\\n    $log .= \'<pre class=\\"getCommentsLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\r\\n}\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toSeparatePlaceholders)) {\\r\\n    $output[\'log\'] = $log;\\r\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\r\\n} else {\\r\\n    $output .= $log;\\r\\n\\r\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\r\\n        $output = $pdoFetch->getChunk($tplWrapper, array(\'output\' => $output), $pdoFetch->config[\'fastMode\']);\\r\\n    }\\r\\n\\r\\n    if (!empty($toPlaceholder)) {\\r\\n        $modx->setPlaceholder($toPlaceholder, $output);\\r\\n    } else {\\r\\n        return $output;\\r\\n    }\\r\\n}"}',
        'guid' => 'd83fe1b98a2f5ccb30859b6a232edc38',
        'native_key' => NULL,
        'signature' => 'fd6af1f195a1522df219857c762b6529',
      ),
      'b20f7dc5a14cd08ead5e2fb69779d443' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"getStars","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\nif (empty($class)) {\\r\\n    $class = \'Ticket\';\\r\\n}\\r\\n\\/** @var integer $user *\\/\\r\\nif (empty($user)) {\\r\\n    $user = $modx->user->get(\'id\');\\r\\n}\\r\\nunset($scriptProperties[\'user\']);\\r\\n\\r\\n$ids = array();\\r\\n$q = $modx->newQuery(\'TicketStar\', array(\'class\' => $class, \'createdby\' => $user));\\r\\n$q->select(\'id\');\\r\\n$tstart = microtime(true);\\r\\nif ($q->prepare() && $q->stmt->execute()) {\\r\\n    $modx->queryTime = microtime(true) - $tstart;\\r\\n    $modx->executedQueries++;\\r\\n\\r\\n    $ids = $q->stmt->fetchAll(PDO::FETCH_COLUMN);\\r\\n}\\r\\n\\r\\nif (empty($ids)) {\\r\\n    return false;\\r\\n}\\r\\n\\r\\n$where = array($class . \'.id:IN\' => $ids);\\r\\nforeach (array(\'where\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$scriptProperties[\'where\'] = json_encode($where);\\r\\nif (empty($parents)) {\\r\\n    $scriptProperties[\'parents\'] = 0;\\r\\n}\\r\\nif (empty($tpl)) {\\r\\n    unset($scriptProperties[\'tpl\']);\\r\\n}\\r\\n\\r\\nreturn $class == \'Ticket\'\\r\\n    ? $modx->runSnippet(\'getTickets\', $scriptProperties)\\r\\n    : $modx->runSnippet(\'getComments\', $scriptProperties);","locked":0,"properties":"a:2:{s:5:\\"class\\";a:7:{s:4:\\"name\\";s:5:\\"class\\";s:4:\\"desc\\";s:18:\\"tickets_prop_class\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:6:\\"Ticket\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.get_stars.php","content":"\\/** @var array $scriptProperties *\\/\\r\\nif (empty($class)) {\\r\\n    $class = \'Ticket\';\\r\\n}\\r\\n\\/** @var integer $user *\\/\\r\\nif (empty($user)) {\\r\\n    $user = $modx->user->get(\'id\');\\r\\n}\\r\\nunset($scriptProperties[\'user\']);\\r\\n\\r\\n$ids = array();\\r\\n$q = $modx->newQuery(\'TicketStar\', array(\'class\' => $class, \'createdby\' => $user));\\r\\n$q->select(\'id\');\\r\\n$tstart = microtime(true);\\r\\nif ($q->prepare() && $q->stmt->execute()) {\\r\\n    $modx->queryTime = microtime(true) - $tstart;\\r\\n    $modx->executedQueries++;\\r\\n\\r\\n    $ids = $q->stmt->fetchAll(PDO::FETCH_COLUMN);\\r\\n}\\r\\n\\r\\nif (empty($ids)) {\\r\\n    return false;\\r\\n}\\r\\n\\r\\n$where = array($class . \'.id:IN\' => $ids);\\r\\nforeach (array(\'where\') as $v) {\\r\\n    if (!empty($scriptProperties[$v])) {\\r\\n        $tmp = $scriptProperties[$v];\\r\\n        if (!is_array($tmp)) {\\r\\n            $tmp = json_decode($tmp, true);\\r\\n        }\\r\\n        if (is_array($tmp)) {\\r\\n            $$v = array_merge($$v, $tmp);\\r\\n        }\\r\\n    }\\r\\n    unset($scriptProperties[$v]);\\r\\n}\\r\\n$scriptProperties[\'where\'] = json_encode($where);\\r\\nif (empty($parents)) {\\r\\n    $scriptProperties[\'parents\'] = 0;\\r\\n}\\r\\nif (empty($tpl)) {\\r\\n    unset($scriptProperties[\'tpl\']);\\r\\n}\\r\\n\\r\\nreturn $class == \'Ticket\'\\r\\n    ? $modx->runSnippet(\'getTickets\', $scriptProperties)\\r\\n    : $modx->runSnippet(\'getComments\', $scriptProperties);"}',
        'guid' => '4c6bc14b758006c7c73f140f335be284',
        'native_key' => NULL,
        'signature' => '48abf6c49f52b0708be49fc23da98355',
      ),
      '99d2bcfd2aeb119cc0e02feb5ed84bd3' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"subscribeAuthor","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n\\r\\nif (!$Tickets->authenticated || empty($scriptProperties[\'createdby\'])) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\nif (!empty($scriptProperties[\'TicketsInit\'])) {\\r\\n    $Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n}\\r\\n\\r\\nif ($profile = $modx->getObject(\'TicketAuthor\', array(\'id\' => $scriptProperties[\'createdby\']))) {\\r\\n    $properties = $profile->get(\'properties\');\\r\\n    if (!empty($properties[\'subscribers\'])) {\\r\\n        $found = array_search($modx->user->id, $properties[\'subscribers\']);\\r\\n        $subscribed = ($found === false) ? 0:1;\\r\\n    }\\r\\n}\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.Tickets.author.subscribe\');\\r\\n$data = [\\r\\n    \'author_id\' => $scriptProperties[\'createdby\'],\\r\\n    \'subscribed\' => $subscribed\\r\\n];\\r\\n$output = $Tickets->getChunk($tpl, $data);\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:3:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:16:\\"tickets_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.Tickets.author.subscribe\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"TicketsInit\\";a:7:{s:4:\\"name\\";s:11:\\"TicketsInit\\";s:4:\\"desc\\";s:24:\\"tickets_prop_TicketsInit\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"0\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"createdby\\";a:7:{s:4:\\"name\\";s:9:\\"createdby\\";s:4:\\"desc\\";s:22:\\"tickets_prop_createdby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"0\\";s:7:\\"lexicon\\";s:18:\\"tickets:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/snippets\\/snippet.subscribe_author.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var Tickets $Tickets *\\/\\r\\n$Tickets = $modx->getService(\'tickets\', \'Tickets\', $modx->getOption(\'tickets.core_path\', null,\\r\\n        $modx->getOption(\'core_path\') . \'components\\/tickets\\/\') . \'model\\/tickets\\/\', $scriptProperties);\\r\\n\\r\\nif (!$Tickets->authenticated || empty($scriptProperties[\'createdby\'])) {\\r\\n    return \'\';\\r\\n}\\r\\n\\r\\nif (!empty($scriptProperties[\'TicketsInit\'])) {\\r\\n    $Tickets->initialize($modx->context->key, $scriptProperties);\\r\\n}\\r\\n\\r\\nif ($profile = $modx->getObject(\'TicketAuthor\', array(\'id\' => $scriptProperties[\'createdby\']))) {\\r\\n    $properties = $profile->get(\'properties\');\\r\\n    if (!empty($properties[\'subscribers\'])) {\\r\\n        $found = array_search($modx->user->id, $properties[\'subscribers\']);\\r\\n        $subscribed = ($found === false) ? 0:1;\\r\\n    }\\r\\n}\\r\\n\\r\\n$tpl = $modx->getOption(\'tpl\', $scriptProperties, \'tpl.Tickets.author.subscribe\');\\r\\n$data = [\\r\\n    \'author_id\' => $scriptProperties[\'createdby\'],\\r\\n    \'subscribed\' => $subscribed\\r\\n];\\r\\n$output = $Tickets->getChunk($tpl, $data);\\r\\n\\r\\n\\/\\/ Return output\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n} else {\\r\\n    return $output;\\r\\n}"}',
        'guid' => '3becf8286a3ffcb8c51941e30056c165',
        'native_key' => NULL,
        'signature' => '930982e24ddc4628b38f2b77899f6e67',
      ),
    ),
    'Plugins' => 
    array (
      '76d8b2c0bda556bfb4236a83454cf6e7' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"Tickets","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/** @var modX $modx *\\/\\r\\nswitch ($modx->event->name) {\\r\\n\\r\\n    case \'OnSiteRefresh\':\\r\\n        if ($modx->cacheManager->refresh(array(\'default\\/tickets\' => array()))) {\\r\\n            $modx->log(modX::LOG_LEVEL_INFO, $modx->lexicon(\'refresh_default\') . \': Tickets\');\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnDocFormSave\':\\r\\n        \\/** @var Ticket $resource *\\/\\r\\n        if ($mode == \'new\' && $resource->class_key == \\"Ticket\\") {\\r\\n            $modx->cacheManager->delete(\'tickets\\/latest.tickets\');\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnWebPagePrerender\':\\r\\n        $output = &$modx->resource->_output;\\r\\n        $output = str_replace(\\r\\n            array(\'*(*(*(*(*(*\', \'*)*)*)*)*)*\', \'~(~(~(~(~(~\', \'~)~)~)~)~)~\'),\\r\\n            array(\'[\', \']\', \'{\', \'}\'),\\r\\n            $output\\r\\n        );\\r\\n        break;\\r\\n\\r\\n    case \'OnPageNotFound\':\\r\\n        \\/\\/ It is working only with friendly urls enabled\\r\\n        $q = trim(@$_REQUEST[$modx->context->getOption(\'request_param_alias\', \'q\')]);\\r\\n        $matches = explode(\'\\/\', rtrim($q, \'\\/\'));\\r\\n        if (count($matches) < 2) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        $ticket_uri = array_pop($matches);\\r\\n        $section_uri = implode(\'\\/\', $matches) . \'\\/\';\\r\\n\\r\\n        if ($section_id = $modx->findResource($section_uri)) {\\r\\n            \\/** @var TicketsSection $section *\\/\\r\\n            if ($section = $modx->getObject(\'TicketsSection\', array(\'id\' => $section_id))) {\\r\\n                if (is_numeric($ticket_uri)) {\\r\\n                    $ticket_id = $ticket_uri;\\r\\n                } elseif (preg_match(\'#^\\\\d+#\', $ticket_uri, $tmp)) {\\r\\n                    $ticket_id = $tmp[0];\\r\\n                } else {\\r\\n                    $properties = $section->getProperties(\'tickets\');\\r\\n                    if (!empty($properties[\'uri\']) && strpos($properties[\'uri\'], \'%id\') !== false) {\\r\\n                        $pcre = str_replace(\'%id\', \'([0-9]+)\', $properties[\'uri\']);\\r\\n                        $pcre = preg_replace(\'#(\\\\%[a-z]+)#\', \'(?:.*?)\', $pcre);\\r\\n                        if (@preg_match(\'#\' . trim($pcre, \'\\/\') . \'#\', $ticket_uri, $matches)) {\\r\\n                            $ticket_id = $matches[1];\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n                if (!empty($ticket_id)) {\\r\\n                    if ($ticket = $modx->getObject(\'Ticket\', array(\'id\' => $ticket_id, \'deleted\' => 0))) {\\r\\n                        if ($ticket->published) {\\r\\n                            $modx->sendRedirect($modx->makeUrl($ticket_id),\\r\\n                                array(\'responseCode\' => \'HTTP\\/1.1 301 Moved Permanently\'));\\r\\n                        } elseif ($unp_id = $modx->getOption(\'tickets.unpublished_ticket_page\')) {\\r\\n                            $modx->sendForward($unp_id, \'HTTP\\/1.1 403 Forbidden\');\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnLoadWebDocument\':\\r\\n        $authenticated = $modx->user->isAuthenticated($modx->context->get(\'key\'));\\r\\n        $key = \'Tickets_User\';\\r\\n\\r\\n        if (!$authenticated && !$modx->getOption(\'tickets.count_guests\')) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        if (empty($_COOKIE[$key])) {\\r\\n            if (!empty($_SESSION[$key])) {\\r\\n                $guest_key = $_SESSION[$key];\\r\\n            } else {\\r\\n                $guest_key = $_SESSION[$key] = md5(rand() . time() . rand());\\r\\n            }\\r\\n            setcookie($key, $guest_key, time() + (86400 * 365), \'\\/\');\\r\\n        } else {\\r\\n            $guest_key = $_COOKIE[$key];\\r\\n        }\\r\\n\\r\\n        if (empty($_SESSION[$key])) {\\r\\n            $_SESSION[$key] = $guest_key;\\r\\n        }\\r\\n\\r\\n        if ($authenticated) {\\r\\n            \\/** @var TicketAuthor $profile *\\/\\r\\n            if (!$profile = $modx->user->getOne(\'AuthorProfile\')) {\\r\\n                $profile = $modx->newObject(\'TicketAuthor\');\\r\\n                $modx->user->addOne($profile);\\r\\n            }\\r\\n            $profile->set(\'visitedon\', time());\\r\\n            $profile->save();\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnWebPageComplete\':\\r\\n        \\/** @var Tickets $Tickets *\\/\\r\\n        $Tickets = $modx->getService(\'tickets\');\\r\\n        $Tickets->logView($modx->resource->get(\'id\'));\\r\\n        break;\\r\\n\\r\\n    case \'OnUserSave\':\\r\\n        \\/** @var modUser $user *\\/\\r\\n        if ($mode == \'new\' && $user && !$user->getOne(\'AuthorProfile\')) {\\r\\n            $profile = $modx->newObject(\'TicketAuthor\');\\r\\n            $user->addOne($profile);\\r\\n            $profile->save();\\r\\n        }\\r\\n        break;\\r\\n\\r\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/tickets\\/elements\\/plugins\\/plugin.tickets.php","content":"\\/** @var modX $modx *\\/\\r\\nswitch ($modx->event->name) {\\r\\n\\r\\n    case \'OnSiteRefresh\':\\r\\n        if ($modx->cacheManager->refresh(array(\'default\\/tickets\' => array()))) {\\r\\n            $modx->log(modX::LOG_LEVEL_INFO, $modx->lexicon(\'refresh_default\') . \': Tickets\');\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnDocFormSave\':\\r\\n        \\/** @var Ticket $resource *\\/\\r\\n        if ($mode == \'new\' && $resource->class_key == \\"Ticket\\") {\\r\\n            $modx->cacheManager->delete(\'tickets\\/latest.tickets\');\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnWebPagePrerender\':\\r\\n        $output = &$modx->resource->_output;\\r\\n        $output = str_replace(\\r\\n            array(\'*(*(*(*(*(*\', \'*)*)*)*)*)*\', \'~(~(~(~(~(~\', \'~)~)~)~)~)~\'),\\r\\n            array(\'[\', \']\', \'{\', \'}\'),\\r\\n            $output\\r\\n        );\\r\\n        break;\\r\\n\\r\\n    case \'OnPageNotFound\':\\r\\n        \\/\\/ It is working only with friendly urls enabled\\r\\n        $q = trim(@$_REQUEST[$modx->context->getOption(\'request_param_alias\', \'q\')]);\\r\\n        $matches = explode(\'\\/\', rtrim($q, \'\\/\'));\\r\\n        if (count($matches) < 2) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        $ticket_uri = array_pop($matches);\\r\\n        $section_uri = implode(\'\\/\', $matches) . \'\\/\';\\r\\n\\r\\n        if ($section_id = $modx->findResource($section_uri)) {\\r\\n            \\/** @var TicketsSection $section *\\/\\r\\n            if ($section = $modx->getObject(\'TicketsSection\', array(\'id\' => $section_id))) {\\r\\n                if (is_numeric($ticket_uri)) {\\r\\n                    $ticket_id = $ticket_uri;\\r\\n                } elseif (preg_match(\'#^\\\\d+#\', $ticket_uri, $tmp)) {\\r\\n                    $ticket_id = $tmp[0];\\r\\n                } else {\\r\\n                    $properties = $section->getProperties(\'tickets\');\\r\\n                    if (!empty($properties[\'uri\']) && strpos($properties[\'uri\'], \'%id\') !== false) {\\r\\n                        $pcre = str_replace(\'%id\', \'([0-9]+)\', $properties[\'uri\']);\\r\\n                        $pcre = preg_replace(\'#(\\\\%[a-z]+)#\', \'(?:.*?)\', $pcre);\\r\\n                        if (@preg_match(\'#\' . trim($pcre, \'\\/\') . \'#\', $ticket_uri, $matches)) {\\r\\n                            $ticket_id = $matches[1];\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n                if (!empty($ticket_id)) {\\r\\n                    if ($ticket = $modx->getObject(\'Ticket\', array(\'id\' => $ticket_id, \'deleted\' => 0))) {\\r\\n                        if ($ticket->published) {\\r\\n                            $modx->sendRedirect($modx->makeUrl($ticket_id),\\r\\n                                array(\'responseCode\' => \'HTTP\\/1.1 301 Moved Permanently\'));\\r\\n                        } elseif ($unp_id = $modx->getOption(\'tickets.unpublished_ticket_page\')) {\\r\\n                            $modx->sendForward($unp_id, \'HTTP\\/1.1 403 Forbidden\');\\r\\n                        }\\r\\n                    }\\r\\n                }\\r\\n            }\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnLoadWebDocument\':\\r\\n        $authenticated = $modx->user->isAuthenticated($modx->context->get(\'key\'));\\r\\n        $key = \'Tickets_User\';\\r\\n\\r\\n        if (!$authenticated && !$modx->getOption(\'tickets.count_guests\')) {\\r\\n            return;\\r\\n        }\\r\\n\\r\\n        if (empty($_COOKIE[$key])) {\\r\\n            if (!empty($_SESSION[$key])) {\\r\\n                $guest_key = $_SESSION[$key];\\r\\n            } else {\\r\\n                $guest_key = $_SESSION[$key] = md5(rand() . time() . rand());\\r\\n            }\\r\\n            setcookie($key, $guest_key, time() + (86400 * 365), \'\\/\');\\r\\n        } else {\\r\\n            $guest_key = $_COOKIE[$key];\\r\\n        }\\r\\n\\r\\n        if (empty($_SESSION[$key])) {\\r\\n            $_SESSION[$key] = $guest_key;\\r\\n        }\\r\\n\\r\\n        if ($authenticated) {\\r\\n            \\/** @var TicketAuthor $profile *\\/\\r\\n            if (!$profile = $modx->user->getOne(\'AuthorProfile\')) {\\r\\n                $profile = $modx->newObject(\'TicketAuthor\');\\r\\n                $modx->user->addOne($profile);\\r\\n            }\\r\\n            $profile->set(\'visitedon\', time());\\r\\n            $profile->save();\\r\\n        }\\r\\n        break;\\r\\n\\r\\n    case \'OnWebPageComplete\':\\r\\n        \\/** @var Tickets $Tickets *\\/\\r\\n        $Tickets = $modx->getService(\'tickets\');\\r\\n        $Tickets->logView($modx->resource->get(\'id\'));\\r\\n        break;\\r\\n\\r\\n    case \'OnUserSave\':\\r\\n        \\/** @var modUser $user *\\/\\r\\n        if ($mode == \'new\' && $user && !$user->getOne(\'AuthorProfile\')) {\\r\\n            $profile = $modx->newObject(\'TicketAuthor\');\\r\\n            $user->addOne($profile);\\r\\n            $profile->save();\\r\\n        }\\r\\n        break;\\r\\n\\r\\n}"}',
        'guid' => '3be883dc192ea34ce72830969987d7b7',
        'native_key' => NULL,
        'signature' => '7148eac5eff383460fed7fe4d785278a',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '32a8a2982332171800decf28c72967ba' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormSave","priority":0,"propertyset":0}',
              'guid' => '3529e60be336d1c37bc77b03a3b947c5',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormSave',
              ),
              'signature' => 'ce0e039011c427667ec4375426c52ec5',
            ),
            'd869bcf036e57e10c3a82a47ea212913' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnSiteRefresh","priority":0,"propertyset":0}',
              'guid' => 'bd7682b2be55cc841520c05ac2c96afc',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnSiteRefresh',
              ),
              'signature' => '82d622f75adeb3c5d9da752b92afb63e',
            ),
            '93a16b177a7f2061486befe92c1bec9d' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPagePrerender","priority":0,"propertyset":0}',
              'guid' => '9613f8f16719005496b4e5e46d1c77df',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPagePrerender',
              ),
              'signature' => 'cd20d140e7edda766f2fe4ddf8a19228',
            ),
            'a72260bcd8f67b6bd6cd4e2cfa41414b' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnPageNotFound","priority":0,"propertyset":0}',
              'guid' => '624e081cd14d9466e806d93f185481e5',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnPageNotFound',
              ),
              'signature' => '5427ec31aac3b23c29a9736bbf9e826c',
            ),
            '02d509026626d90f4434d1e2f6f43dc4' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnLoadWebDocument","priority":0,"propertyset":0}',
              'guid' => 'd621c6291105219e2756d0afec1d5b19',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnLoadWebDocument',
              ),
              'signature' => '4d7b9d7e11af214ae6735c674e57217a',
            ),
            '69967e6ec68c395ed4b5f55c9d024cac' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnWebPageComplete","priority":0,"propertyset":0}',
              'guid' => '910988c4bea61e02570a621ddcca70ec',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnWebPageComplete',
              ),
              'signature' => 'a4a6e14a169861b952a0092a93922db6',
            ),
            '0c8173738e38cf6408d3cda496b78540' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnEmptyTrash","priority":0,"propertyset":0}',
              'guid' => 'd3c1dfe3c5ff98329d23f71e69f6d6f1',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnEmptyTrash',
              ),
              'signature' => 'e84ecb70d58a14b8c48fe8fcba503936',
            ),
            '454435473728da9747554f76c5ee046e' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnUserSave","priority":0,"propertyset":0}',
              'guid' => 'e7c5287df6fe5e0212713f23e0dd899b',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnUserSave',
              ),
              'signature' => '76cbe2590a4debcd6e6675610207c12c',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'tickets',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"tickets"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"tickets"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.tables_values.resolver","type":"php","name":"resolve.tables_values"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.policy.resolver","type":"php","name":"resolve.policy"}',
    ),
    5 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.actionfields.resolver","type":"php","name":"resolve.actionfields"}',
    ),
    6 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.upgrade.resolver","type":"php","name":"resolve.upgrade"}',
    ),
    7 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
    8 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.sources.resolver","type":"php","name":"resolve.sources"}',
    ),
    9 => 
    array (
      'type' => 'php',
      'body' => '{"source":"tickets-1.13.0-pl\\/modCategory\\/4cd56b8c11bb0b2892396bcba8d1da85.resolve.settings.resolver","type":"php","name":"resolve.settings"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => '04ed0a3b6a960230009776644e59929d',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '4cd56b8c11bb0b2892396bcba8d1da85',
  'native_key' => NULL,
  'object' => '{"id":null,"parent":0,"category":"Tickets","rank":0}',
);